(self.webpackChunkpage_builder=self.webpackChunkpage_builder||[]).push([["node_modules_ngx-virtual-scroller___ivy_ngcc___fesm2015_ngx-virtual-scroller_js-_4dd30","node_modules_ngx-virtual-scroller___ivy_ngcc___fesm2015_ngx-virtual-scroller_js-_4dd31"],{74919:($,H,E)=>{E.r(H),E.d(H,{VIRTUAL_SCROLLER_DEFAULT_OPTIONS_FACTORY:()=>B,VirtualScrollerComponent:()=>g,VirtualScrollerModule:()=>M});var v=E(70655),s=E(60562),V=E(62923),R=E(75650);const U=["header"],q=["container"],A=["content"],N=["invisiblePadding"];function B(){return{checkResizeInterval:1e3,modifyOverflowStyleOfParentScroll:!0,resizeBypassRefreshThreshold:5,scrollAnimationTime:750,scrollDebounceTime:0,scrollThrottlingTime:0,stripedTable:!1}}let g=class{constructor(e,t,a,n,p,c){this.element=e,this.renderer=t,this.zone=a,this.changeDetectorRef=n,this.window=window,this.executeRefreshOutsideAngularZone=!1,this._enableUnequalChildrenSizes=!1,this.RTL=!1,this.useMarginInsteadOfTranslate=!1,this.ssrViewportWidth=1920,this.ssrViewportHeight=1080,this._items=[],this.compareItems=(d,S)=>d===S,this.vsUpdate=new s.EventEmitter,this.vsChange=new s.EventEmitter,this.vsStart=new s.EventEmitter,this.vsEnd=new s.EventEmitter,this.calculatedScrollbarWidth=0,this.calculatedScrollbarHeight=0,this.padding=0,this.previousViewPort={},this.cachedPageSize=0,this.previousScrollNumberElements=0,this.isAngularUniversalSSR=(0,V.isPlatformServer)(p),this.checkResizeInterval=c.checkResizeInterval,this.modifyOverflowStyleOfParentScroll=c.modifyOverflowStyleOfParentScroll,this.resizeBypassRefreshThreshold=c.resizeBypassRefreshThreshold,this.scrollAnimationTime=c.scrollAnimationTime,this.scrollDebounceTime=c.scrollDebounceTime,this.scrollThrottlingTime=c.scrollThrottlingTime,this.scrollbarHeight=c.scrollbarHeight,this.scrollbarWidth=c.scrollbarWidth,this.stripedTable=c.stripedTable,this.horizontal=!1,this.resetWrapGroupDimensions()}get viewPortInfo(){let e=this.previousViewPort||{};return{startIndex:e.startIndex||0,endIndex:e.endIndex||0,scrollStartPosition:e.scrollStartPosition||0,scrollEndPosition:e.scrollEndPosition||0,maxScrollPosition:e.maxScrollPosition||0,startIndexWithBuffer:e.startIndexWithBuffer||0,endIndexWithBuffer:e.endIndexWithBuffer||0}}get enableUnequalChildrenSizes(){return this._enableUnequalChildrenSizes}set enableUnequalChildrenSizes(e){this._enableUnequalChildrenSizes!==e&&(this._enableUnequalChildrenSizes=e,this.minMeasuredChildWidth=void 0,this.minMeasuredChildHeight=void 0)}get bufferAmount(){return"number"==typeof this._bufferAmount&&this._bufferAmount>=0?this._bufferAmount:this.enableUnequalChildrenSizes?5:0}set bufferAmount(e){this._bufferAmount=e}get scrollThrottlingTime(){return this._scrollThrottlingTime}set scrollThrottlingTime(e){this._scrollThrottlingTime=e,this.updateOnScrollFunction()}get scrollDebounceTime(){return this._scrollDebounceTime}set scrollDebounceTime(e){this._scrollDebounceTime=e,this.updateOnScrollFunction()}updateOnScrollFunction(){this.onScroll=this.scrollDebounceTime?this.debounce(()=>{this.refresh_internal(!1)},this.scrollDebounceTime):this.scrollThrottlingTime?this.throttleTrailing(()=>{this.refresh_internal(!1)},this.scrollThrottlingTime):()=>{this.refresh_internal(!1)}}get checkResizeInterval(){return this._checkResizeInterval}set checkResizeInterval(e){this._checkResizeInterval!==e&&(this._checkResizeInterval=e,this.addScrollEventHandlers())}get items(){return this._items}set items(e){e!==this._items&&(this._items=e||[],this.refresh_internal(!0))}get horizontal(){return this._horizontal}set horizontal(e){this._horizontal=e,this.updateDirection()}revertParentOverscroll(){const e=this.getScrollElement();e&&this.oldParentScrollOverflow&&(e.style["overflow-y"]=this.oldParentScrollOverflow.y,e.style["overflow-x"]=this.oldParentScrollOverflow.x),this.oldParentScrollOverflow=void 0}get parentScroll(){return this._parentScroll}set parentScroll(e){if(this._parentScroll===e)return;this.revertParentOverscroll(),this._parentScroll=e,this.addScrollEventHandlers();const t=this.getScrollElement();this.modifyOverflowStyleOfParentScroll&&t!==this.element.nativeElement&&(this.oldParentScrollOverflow={x:t.style["overflow-x"],y:t.style["overflow-y"]},t.style["overflow-y"]=this.horizontal?"visible":"auto",t.style["overflow-x"]=this.horizontal?"auto":"visible")}ngOnInit(){this.addScrollEventHandlers()}ngOnDestroy(){this.removeScrollEventHandlers(),this.revertParentOverscroll()}ngOnChanges(e){let t=this.cachedItemsLength!==this.items.length;this.cachedItemsLength=this.items.length,this.refresh_internal(t||!e.items||!e.items.previousValue||0===e.items.previousValue.length)}ngDoCheck(){if(this.cachedItemsLength!==this.items.length)return this.cachedItemsLength=this.items.length,void this.refresh_internal(!0);if(this.previousViewPort&&this.viewPortItems&&this.viewPortItems.length>0){let e=!1;for(let t=0;t<this.viewPortItems.length;++t)if(!this.compareItems(this.items[this.previousViewPort.startIndexWithBuffer+t],this.viewPortItems[t])){e=!0;break}e&&this.refresh_internal(!0)}}refresh(){this.refresh_internal(!0)}invalidateAllCachedMeasurements(){this.wrapGroupDimensions={maxChildSizePerWrapGroup:[],numberOfKnownWrapGroupChildSizes:0,sumOfKnownWrapGroupChildWidths:0,sumOfKnownWrapGroupChildHeights:0},this.minMeasuredChildWidth=void 0,this.minMeasuredChildHeight=void 0,this.refresh_internal(!1)}invalidateCachedMeasurementForItem(e){if(this.enableUnequalChildrenSizes){let t=this.items&&this.items.indexOf(e);t>=0&&this.invalidateCachedMeasurementAtIndex(t)}else this.minMeasuredChildWidth=void 0,this.minMeasuredChildHeight=void 0;this.refresh_internal(!1)}invalidateCachedMeasurementAtIndex(e){if(this.enableUnequalChildrenSizes){let t=this.wrapGroupDimensions.maxChildSizePerWrapGroup[e];t&&(this.wrapGroupDimensions.maxChildSizePerWrapGroup[e]=void 0,--this.wrapGroupDimensions.numberOfKnownWrapGroupChildSizes,this.wrapGroupDimensions.sumOfKnownWrapGroupChildWidths-=t.childWidth||0,this.wrapGroupDimensions.sumOfKnownWrapGroupChildHeights-=t.childHeight||0)}else this.minMeasuredChildWidth=void 0,this.minMeasuredChildHeight=void 0;this.refresh_internal(!1)}scrollInto(e,t=!0,a=0,n,p){let c=this.items.indexOf(e);-1!==c&&this.scrollToIndex(c,t,a,n,p)}scrollToIndex(e,t=!0,a=0,n,p){let c=5,d=()=>{if(--c,c<=0)return void(p&&p());let S=this.calculateDimensions(),w=Math.min(Math.max(e,0),S.itemCount-1);this.previousViewPort.startIndex!==w?this.scrollToIndex_internal(e,t,a,0,d):p&&p()};this.scrollToIndex_internal(e,t,a,n,d)}scrollToIndex_internal(e,t=!0,a=0,n,p){n=void 0===n?this.scrollAnimationTime:n;let c=this.calculateDimensions(),d=this.calculatePadding(e,c)+a;t||(d-=c.wrapGroupsPerPage*c[this._childScrollDim]),this.scrollToPosition(d,n,p)}scrollToPosition(e,t,a){e+=this.getElementsOffset(),t=void 0===t?this.scrollAnimationTime:t;let p,n=this.getScrollElement();if(this.currentTween&&(this.currentTween.stop(),this.currentTween=void 0),!t)return this.renderer.setProperty(n,this._scrollType,e),void this.refresh_internal(!1,a);const c={scrollPosition:n[this._scrollType]};let d=new R.Tween(c).to({scrollPosition:e},t).easing(R.Easing.Quadratic.Out).onUpdate(w=>{isNaN(w.scrollPosition)||(this.renderer.setProperty(n,this._scrollType,w.scrollPosition),this.refresh_internal(!1))}).onStop(()=>{cancelAnimationFrame(p)}).start();const S=w=>{if(d.isPlaying()){if(d.update(w),c.scrollPosition===e)return void this.refresh_internal(!1,a);this.zone.runOutsideAngular(()=>{p=requestAnimationFrame(S)})}};S(),this.currentTween=d}getElementSize(e){let t=e.getBoundingClientRect(),a=getComputedStyle(e),n=parseInt(a["margin-top"],10)||0,p=parseInt(a["margin-bottom"],10)||0,c=parseInt(a["margin-left"],10)||0,d=parseInt(a["margin-right"],10)||0;return{top:t.top+n,bottom:t.bottom+p,left:t.left+c,right:t.right+d,width:t.width+c+d,height:t.height+n+p}}checkScrollElementResized(){let t,e=this.getElementSize(this.getScrollElement());if(this.previousScrollBoundingRect){let a=Math.abs(e.width-this.previousScrollBoundingRect.width),n=Math.abs(e.height-this.previousScrollBoundingRect.height);t=a>this.resizeBypassRefreshThreshold||n>this.resizeBypassRefreshThreshold}else t=!0;t&&(this.previousScrollBoundingRect=e,e.width>0&&e.height>0&&this.refresh_internal(!1))}updateDirection(){this.horizontal?(this._childScrollDim="childWidth",this._invisiblePaddingProperty="scaleX",this._marginDir="margin-left",this._offsetType="offsetLeft",this._pageOffsetType="pageXOffset",this._scrollType="scrollLeft",this._translateDir="translateX"):(this._childScrollDim="childHeight",this._invisiblePaddingProperty="scaleY",this._marginDir="margin-top",this._offsetType="offsetTop",this._pageOffsetType="pageYOffset",this._scrollType="scrollTop",this._translateDir="translateY")}debounce(e,t){const a=this.throttleTrailing(e,t),n=function(){a.cancel(),a.apply(this,arguments)};return n.cancel=function(){a.cancel()},n}throttleTrailing(e,t){let a,n=arguments;const p=function(){const c=this;n=arguments,!a&&(t<=0?e.apply(c,n):a=setTimeout(function(){a=void 0,e.apply(c,n)},t))};return p.cancel=function(){a&&(clearTimeout(a),a=void 0)},p}refresh_internal(e,t,a=2){if(e&&this.previousViewPort&&this.previousViewPort.scrollStartPosition>0){let n=this.previousViewPort,p=this.viewPortItems,c=t;t=()=>{let d=this.previousViewPort.scrollLength-n.scrollLength;if(d>0&&this.viewPortItems){let S=p[0],w=this.items.findIndex(I=>this.compareItems(S,I));if(w>this.previousViewPort.startIndexWithBuffer){let I=!1;for(let C=1;C<this.viewPortItems.length;++C)if(!this.compareItems(this.items[w+C],p[C])){I=!0;break}if(!I)return void this.scrollToPosition(this.previousViewPort.scrollStartPosition+d,0,c)}}c&&c()}}this.zone.runOutsideAngular(()=>{requestAnimationFrame(()=>{e&&this.resetWrapGroupDimensions();let n=this.calculateViewport(),p=e||n.startIndex!==this.previousViewPort.startIndex,c=e||n.endIndex!==this.previousViewPort.endIndex,d=n.scrollLength!==this.previousViewPort.scrollLength,S=n.padding!==this.previousViewPort.padding,w=n.scrollStartPosition!==this.previousViewPort.scrollStartPosition||n.scrollEndPosition!==this.previousViewPort.scrollEndPosition||n.maxScrollPosition!==this.previousViewPort.maxScrollPosition;if(this.previousViewPort=n,d&&(this.renderer.setStyle(this.invisiblePaddingElementRef.nativeElement,"transform",`${this._invisiblePaddingProperty}(${n.scrollLength})`),this.renderer.setStyle(this.invisiblePaddingElementRef.nativeElement,"webkitTransform",`${this._invisiblePaddingProperty}(${n.scrollLength})`)),S&&(this.useMarginInsteadOfTranslate?this.renderer.setStyle(this.contentElementRef.nativeElement,this._marginDir,`${n.padding}px`):(this.renderer.setStyle(this.contentElementRef.nativeElement,"transform",`${this._translateDir}(${n.padding}px)`),this.renderer.setStyle(this.contentElementRef.nativeElement,"webkitTransform",`${this._translateDir}(${n.padding}px)`))),this.headerElementRef){let C=this.getScrollElement()[this._scrollType],i=this.getElementsOffset(),r=Math.max(C-n.padding-i+this.headerElementRef.nativeElement.clientHeight,0);this.renderer.setStyle(this.headerElementRef.nativeElement,"transform",`${this._translateDir}(${r}px)`),this.renderer.setStyle(this.headerElementRef.nativeElement,"webkitTransform",`${this._translateDir}(${r}px)`)}const I=p||c?{startIndex:n.startIndex,endIndex:n.endIndex,scrollStartPosition:n.scrollStartPosition,scrollEndPosition:n.scrollEndPosition,startIndexWithBuffer:n.startIndexWithBuffer,endIndexWithBuffer:n.endIndexWithBuffer,maxScrollPosition:n.maxScrollPosition}:void 0;if(p||c||w){const C=()=>{this.viewPortItems=n.startIndexWithBuffer>=0&&n.endIndexWithBuffer>=0?this.items.slice(n.startIndexWithBuffer,n.endIndexWithBuffer+1):[],this.vsUpdate.emit(this.viewPortItems),p&&this.vsStart.emit(I),c&&this.vsEnd.emit(I),(p||c)&&(this.changeDetectorRef.markForCheck(),this.vsChange.emit(I)),a>0?this.refresh_internal(!1,t,a-1):t&&t()};this.executeRefreshOutsideAngularZone?C():this.zone.run(C)}else{if(a>0&&(d||S))return void this.refresh_internal(!1,t,a-1);t&&t()}})})}getScrollElement(){return this.parentScroll instanceof Window?document.scrollingElement||document.documentElement||document.body:this.parentScroll||this.element.nativeElement}addScrollEventHandlers(){if(this.isAngularUniversalSSR)return;let e=this.getScrollElement();this.removeScrollEventHandlers(),this.zone.runOutsideAngular(()=>{this.parentScroll instanceof Window?(this.disposeScrollHandler=this.renderer.listen("window","scroll",this.onScroll),this.disposeResizeHandler=this.renderer.listen("window","resize",this.onScroll)):(this.disposeScrollHandler=this.renderer.listen(e,"scroll",this.onScroll),this._checkResizeInterval>0&&(this.checkScrollElementResizedTimer=setInterval(()=>{this.checkScrollElementResized()},this._checkResizeInterval)))})}removeScrollEventHandlers(){this.checkScrollElementResizedTimer&&clearInterval(this.checkScrollElementResizedTimer),this.disposeScrollHandler&&(this.disposeScrollHandler(),this.disposeScrollHandler=void 0),this.disposeResizeHandler&&(this.disposeResizeHandler(),this.disposeResizeHandler=void 0)}getElementsOffset(){if(this.isAngularUniversalSSR)return 0;let e=0;if(this.containerElementRef&&this.containerElementRef.nativeElement&&(e+=this.containerElementRef.nativeElement[this._offsetType]),this.parentScroll){let t=this.getScrollElement(),a=this.getElementSize(this.element.nativeElement),n=this.getElementSize(t);e+=this.horizontal?a.left-n.left:a.top-n.top,this.parentScroll instanceof Window||(e+=t[this._scrollType])}return e}countItemsPerWrapGroup(){if(this.isAngularUniversalSSR)return Math.round(this.horizontal?this.ssrViewportHeight/this.ssrChildHeight:this.ssrViewportWidth/this.ssrChildWidth);let e=this.horizontal?"offsetLeft":"offsetTop",t=(this.containerElementRef&&this.containerElementRef.nativeElement||this.contentElementRef.nativeElement).children,a=t?t.length:0;if(0===a)return 1;let n=t[0][e],p=1;for(;p<a&&n===t[p][e];)++p;return p}getScrollStartPosition(){let e;return this.parentScroll instanceof Window&&(e=window[this._pageOffsetType]),e||this.getScrollElement()[this._scrollType]||0}resetWrapGroupDimensions(){const e=this.wrapGroupDimensions;if(this.invalidateAllCachedMeasurements(),!this.enableUnequalChildrenSizes||!e||0===e.numberOfKnownWrapGroupChildSizes)return;const t=this.countItemsPerWrapGroup();for(let a=0;a<e.maxChildSizePerWrapGroup.length;++a){const n=e.maxChildSizePerWrapGroup[a];if(!n||!n.items||!n.items.length)continue;if(n.items.length!==t)return;let p=!1,c=t*a;for(let d=0;d<t;++d)if(!this.compareItems(n.items[d],this.items[c+d])){p=!0;break}p||(++this.wrapGroupDimensions.numberOfKnownWrapGroupChildSizes,this.wrapGroupDimensions.sumOfKnownWrapGroupChildWidths+=n.childWidth||0,this.wrapGroupDimensions.sumOfKnownWrapGroupChildHeights+=n.childHeight||0,this.wrapGroupDimensions.maxChildSizePerWrapGroup[a]=n)}}calculateDimensions(){let e=this.getScrollElement();this.calculatedScrollbarHeight=Math.max(Math.min(e.offsetHeight-e.clientHeight,25),this.calculatedScrollbarHeight),this.calculatedScrollbarWidth=Math.max(Math.min(e.offsetWidth-e.clientWidth,25),this.calculatedScrollbarWidth);let d,S,w,a=e.offsetWidth-(this.scrollbarWidth||this.calculatedScrollbarWidth||(this.horizontal?0:25)),n=e.offsetHeight-(this.scrollbarHeight||this.calculatedScrollbarHeight||(this.horizontal?25:0)),p=this.containerElementRef&&this.containerElementRef.nativeElement||this.contentElementRef.nativeElement,c=this.countItemsPerWrapGroup();if(this.isAngularUniversalSSR){a=this.ssrViewportWidth,n=this.ssrViewportHeight,S=this.ssrChildWidth,w=this.ssrChildHeight;let f=Math.max(Math.ceil(a/S),1),_=Math.max(Math.ceil(n/w),1);d=this.horizontal?f:_}else if(this.enableUnequalChildrenSizes){let f=e[this._scrollType]-(this.previousViewPort?this.previousViewPort.padding:0),_=this.previousViewPort.startIndexWithBuffer||0,b=Math.ceil(_/c),m=0,P=0,O=0,y=0;d=0;for(let D=0;D<p.children.length;++D){++_;let Q=this.getElementSize(p.children[D]);if(m=Math.max(m,Q.width),P=Math.max(P,Q.height),_%c==0){let K=this.wrapGroupDimensions.maxChildSizePerWrapGroup[b];K&&(--this.wrapGroupDimensions.numberOfKnownWrapGroupChildSizes,this.wrapGroupDimensions.sumOfKnownWrapGroupChildWidths-=K.childWidth||0,this.wrapGroupDimensions.sumOfKnownWrapGroupChildHeights-=K.childHeight||0),++this.wrapGroupDimensions.numberOfKnownWrapGroupChildSizes;const X=this.items.slice(_-c,_);if(this.wrapGroupDimensions.maxChildSizePerWrapGroup[b]={childWidth:m,childHeight:P,items:X},this.wrapGroupDimensions.sumOfKnownWrapGroupChildWidths+=m,this.wrapGroupDimensions.sumOfKnownWrapGroupChildHeights+=P,this.horizontal){let x=Math.min(m,Math.max(a-O,0));if(f>0){let G=Math.min(f,x);x-=G,f-=G}O+=x,x>0&&a>=O&&++d}else{let x=Math.min(P,Math.max(n-y,0));if(f>0){let G=Math.min(f,x);x-=G,f-=G}y+=x,x>0&&n>=y&&++d}++b,m=0,P=0}}let T=this.wrapGroupDimensions.sumOfKnownWrapGroupChildWidths/this.wrapGroupDimensions.numberOfKnownWrapGroupChildSizes,z=this.wrapGroupDimensions.sumOfKnownWrapGroupChildHeights/this.wrapGroupDimensions.numberOfKnownWrapGroupChildSizes;S=this.childWidth||T||a,w=this.childHeight||z||n,this.horizontal?a>O&&(d+=Math.ceil((a-O)/S)):n>y&&(d+=Math.ceil((n-y)/w))}else{if(p.children.length>0){(!this.childWidth||!this.childHeight)&&(!this.minMeasuredChildWidth&&a>0&&(this.minMeasuredChildWidth=a),!this.minMeasuredChildHeight&&n>0&&(this.minMeasuredChildHeight=n));let m=this.getElementSize(p.children[0]);this.minMeasuredChildWidth=Math.min(this.minMeasuredChildWidth,m.width),this.minMeasuredChildHeight=Math.min(this.minMeasuredChildHeight,m.height)}S=this.childWidth||this.minMeasuredChildWidth||a,w=this.childHeight||this.minMeasuredChildHeight||n;let f=Math.max(Math.ceil(a/S),1),_=Math.max(Math.ceil(n/w),1);d=this.horizontal?f:_}let I=this.items.length,C=c*d,i=I/C,r=Math.ceil(I/c),l=0,o=this.horizontal?S:w;if(this.enableUnequalChildrenSizes){let f=0;for(let _=0;_<r;++_){let b=this.wrapGroupDimensions.maxChildSizePerWrapGroup[_]&&this.wrapGroupDimensions.maxChildSizePerWrapGroup[_][this._childScrollDim];b?l+=b:++f}l+=Math.round(f*o)}else l=r*o;this.headerElementRef&&(l+=this.headerElementRef.nativeElement.clientHeight);let u=this.horizontal?a:n;return{childHeight:w,childWidth:S,itemCount:I,itemsPerPage:C,itemsPerWrapGroup:c,maxScrollPosition:Math.max(l-u,0),pageCount_fractional:i,scrollLength:l,viewportLength:u,wrapGroupsPerPage:d}}calculatePadding(e,t){if(0===t.itemCount)return 0;let a=t[this._childScrollDim],n=Math.floor(e/t.itemsPerWrapGroup)||0;if(!this.enableUnequalChildrenSizes)return a*n;let p=0,c=0;for(let d=0;d<n;++d){let S=this.wrapGroupDimensions.maxChildSizePerWrapGroup[d]&&this.wrapGroupDimensions.maxChildSizePerWrapGroup[d][this._childScrollDim];S?c+=S:++p}return c+=Math.round(p*a),c}calculatePageInfo(e,t){let a=0;if(this.enableUnequalChildrenSizes){const i=Math.ceil(t.itemCount/t.itemsPerWrapGroup);let r=0,l=t[this._childScrollDim];for(let o=0;o<i;++o){if(r+=this.wrapGroupDimensions.maxChildSizePerWrapGroup[o]&&this.wrapGroupDimensions.maxChildSizePerWrapGroup[o][this._childScrollDim]||l,e<r){a=o/i;break}}}else a=e/t.scrollLength;let n=Math.min(Math.max(a*t.pageCount_fractional,0),t.pageCount_fractional)*t.itemsPerPage,p=t.itemCount-t.itemsPerPage-1,c=Math.min(Math.floor(n),p);if(c-=c%t.itemsPerWrapGroup,this.stripedTable){let i=2*t.itemsPerWrapGroup;c%i!=0&&(c=Math.max(c-c%i,0))}let d=Math.ceil(n)+t.itemsPerPage-1,S=(d+1)%t.itemsPerWrapGroup;S>0&&(d+=t.itemsPerWrapGroup-S),isNaN(c)&&(c=0),isNaN(d)&&(d=0),c=Math.min(Math.max(c,0),t.itemCount-1),d=Math.min(Math.max(d,0),t.itemCount-1);let w=this.bufferAmount*t.itemsPerWrapGroup;return{startIndex:c,endIndex:d,startIndexWithBuffer:Math.min(Math.max(c-w,0),t.itemCount-1),endIndexWithBuffer:Math.min(Math.max(d+w,0),t.itemCount-1),scrollStartPosition:e,scrollEndPosition:e+t.viewportLength,maxScrollPosition:t.maxScrollPosition}}calculateViewport(){let e=this.calculateDimensions(),t=this.getElementsOffset(),a=this.getScrollStartPosition();a>e.scrollLength+t&&!(this.parentScroll instanceof Window)?a=e.scrollLength:a-=t,a=Math.max(0,a);let n=this.calculatePageInfo(a,e),p=this.calculatePadding(n.startIndexWithBuffer,e),c=e.scrollLength;return{startIndex:n.startIndex,endIndex:n.endIndex,startIndexWithBuffer:n.startIndexWithBuffer,endIndexWithBuffer:n.endIndexWithBuffer,padding:Math.round(p),scrollLength:Math.round(c),scrollStartPosition:n.scrollStartPosition,scrollEndPosition:n.scrollEndPosition,maxScrollPosition:n.maxScrollPosition}}};g.\u0275fac=function(e){return new(e||g)(s.\u0275\u0275directiveInject(s.ElementRef),s.\u0275\u0275directiveInject(s.Renderer2),s.\u0275\u0275directiveInject(s.NgZone),s.\u0275\u0275directiveInject(s.ChangeDetectorRef),s.\u0275\u0275directiveInject(s.PLATFORM_ID),s.\u0275\u0275directiveInject("virtual-scroller-default-options",8))},g.\u0275cmp=s.\u0275\u0275defineComponent({type:g,selectors:[["virtual-scroller"],["","virtualScroller",""]],contentQueries:function(e,t,a){if(1&e&&(s.\u0275\u0275contentQuery(a,U,5,s.ElementRef),s.\u0275\u0275contentQuery(a,q,5,s.ElementRef)),2&e){let n;s.\u0275\u0275queryRefresh(n=s.\u0275\u0275loadQuery())&&(t.headerElementRef=n.first),s.\u0275\u0275queryRefresh(n=s.\u0275\u0275loadQuery())&&(t.containerElementRef=n.first)}},viewQuery:function(e,t){if(1&e&&(s.\u0275\u0275viewQuery(A,7,s.ElementRef),s.\u0275\u0275viewQuery(N,7,s.ElementRef)),2&e){let a;s.\u0275\u0275queryRefresh(a=s.\u0275\u0275loadQuery())&&(t.contentElementRef=a.first),s.\u0275\u0275queryRefresh(a=s.\u0275\u0275loadQuery())&&(t.invisiblePaddingElementRef=a.first)}},hostVars:8,hostBindings:function(e,t){2&e&&s.\u0275\u0275classProp("horizontal",t.horizontal)("vertical",!t.horizontal)("selfScroll",!t.parentScroll)("rtl",t.RTL)},inputs:{executeRefreshOutsideAngularZone:"executeRefreshOutsideAngularZone",RTL:"RTL",useMarginInsteadOfTranslate:"useMarginInsteadOfTranslate",ssrViewportWidth:"ssrViewportWidth",ssrViewportHeight:"ssrViewportHeight",compareItems:"compareItems",checkResizeInterval:"checkResizeInterval",modifyOverflowStyleOfParentScroll:"modifyOverflowStyleOfParentScroll",resizeBypassRefreshThreshold:"resizeBypassRefreshThreshold",scrollAnimationTime:"scrollAnimationTime",scrollDebounceTime:"scrollDebounceTime",scrollThrottlingTime:"scrollThrottlingTime",scrollbarHeight:"scrollbarHeight",scrollbarWidth:"scrollbarWidth",stripedTable:"stripedTable",horizontal:"horizontal",enableUnequalChildrenSizes:"enableUnequalChildrenSizes",bufferAmount:"bufferAmount",items:"items",parentScroll:"parentScroll",childWidth:"childWidth",childHeight:"childHeight",ssrChildWidth:"ssrChildWidth",ssrChildHeight:"ssrChildHeight"},outputs:{vsUpdate:"vsUpdate",vsChange:"vsChange",vsStart:"vsStart",vsEnd:"vsEnd"},exportAs:["virtualScroller"],features:[s.\u0275\u0275NgOnChangesFeature],ngContentSelectors:["*"],decls:5,vars:0,consts:[[1,"total-padding"],["invisiblePadding",""],[1,"scrollable-content"],["content",""]],template:function(e,t){1&e&&(s.\u0275\u0275projectionDef(),s.\u0275\u0275element(0,"div",0,1),s.\u0275\u0275elementStart(2,"div",2,3),s.\u0275\u0275projection(4),s.\u0275\u0275elementEnd())},styles:["[_nghost-%COMP%] {\n      position: relative;\n\t  \tdisplay: block;\n      -webkit-overflow-scrolling: touch;\n    }\n\n\t\t.horizontal.selfScroll[_nghost-%COMP%] {\n      overflow-y: visible;\n      overflow-x: auto;\n\t\t}\n\n\t\t.horizontal.selfScroll.rtl[_nghost-%COMP%] {\n\t\t\ttransform: scaleX(-1);\n\t\t}\n\n\t\t.vertical.selfScroll[_nghost-%COMP%] {\n      overflow-y: auto;\n      overflow-x: visible;\n\t\t}\n\n    .scrollable-content[_ngcontent-%COMP%] {\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      max-width: 100vw;\n      max-height: 100vh;\n      position: absolute;\n    }\n\n\t\t.scrollable-content[_ngcontent-%COMP%]     > * {\n\t\t\tbox-sizing: border-box;\n\t\t}\n\n\t\t.horizontal[_nghost-%COMP%] {\n\t\t\twhite-space: nowrap;\n\t\t}\n\n\t\t.horizontal[_nghost-%COMP%]   .scrollable-content[_ngcontent-%COMP%] {\n\t\t\tdisplay: flex;\n\t\t}\n\n\t\t.horizontal[_nghost-%COMP%]   .scrollable-content[_ngcontent-%COMP%]     > * {\n\t\t\tflex-shrink: 0;\n\t\t\tflex-grow: 0;\n\t\t\twhite-space: initial;\n\t\t}\n\n\t\t.horizontal.rtl[_nghost-%COMP%]   .scrollable-content[_ngcontent-%COMP%]     > * {\n\t\t\ttransform:scaleX(-1);\n\t\t}\n\n    .total-padding[_ngcontent-%COMP%] {\n      position: absolute;\n      top: 0;\n      left: 0;\n      height: 1px;\n      width: 1px;\n      transform-origin: 0 0;\n      opacity: 0;\n    }\n\n    .horizontal[_nghost-%COMP%]   .total-padding[_ngcontent-%COMP%] {\n      height: 100%;\n    }"]}),g.ctorParameters=()=>[{type:s.ElementRef},{type:s.Renderer2},{type:s.NgZone},{type:s.ChangeDetectorRef},{type:Object,decorators:[{type:s.Inject,args:[s.PLATFORM_ID]}]},{type:void 0,decorators:[{type:s.Optional},{type:s.Inject,args:["virtual-scroller-default-options"]}]}],(0,v.gn)([(0,s.Input)()],g.prototype,"executeRefreshOutsideAngularZone",void 0),(0,v.gn)([(0,s.Input)()],g.prototype,"enableUnequalChildrenSizes",null),(0,v.gn)([(0,s.Input)()],g.prototype,"RTL",void 0),(0,v.gn)([(0,s.Input)()],g.prototype,"useMarginInsteadOfTranslate",void 0),(0,v.gn)([(0,s.Input)()],g.prototype,"modifyOverflowStyleOfParentScroll",void 0),(0,v.gn)([(0,s.Input)()],g.prototype,"stripedTable",void 0),(0,v.gn)([(0,s.Input)()],g.prototype,"scrollbarWidth",void 0),(0,v.gn)([(0,s.Input)()],g.prototype,"scrollbarHeight",void 0),(0,v.gn)([(0,s.Input)()],g.prototype,"childWidth",void 0),(0,v.gn)([(0,s.Input)()],g.prototype,"childHeight",void 0),(0,v.gn)([(0,s.Input)()],g.prototype,"ssrChildWidth",void 0),(0,v.gn)([(0,s.Input)()],g.prototype,"ssrChildHeight",void 0),(0,v.gn)([(0,s.Input)()],g.prototype,"ssrViewportWidth",void 0),(0,v.gn)([(0,s.Input)()],g.prototype,"ssrViewportHeight",void 0),(0,v.gn)([(0,s.Input)()],g.prototype,"bufferAmount",null),(0,v.gn)([(0,s.Input)()],g.prototype,"scrollAnimationTime",void 0),(0,v.gn)([(0,s.Input)()],g.prototype,"resizeBypassRefreshThreshold",void 0),(0,v.gn)([(0,s.Input)()],g.prototype,"scrollThrottlingTime",null),(0,v.gn)([(0,s.Input)()],g.prototype,"scrollDebounceTime",null),(0,v.gn)([(0,s.Input)()],g.prototype,"checkResizeInterval",null),(0,v.gn)([(0,s.Input)()],g.prototype,"items",null),(0,v.gn)([(0,s.Input)()],g.prototype,"compareItems",void 0),(0,v.gn)([(0,s.Input)()],g.prototype,"horizontal",null),(0,v.gn)([(0,s.Input)()],g.prototype,"parentScroll",null),(0,v.gn)([(0,s.Output)()],g.prototype,"vsUpdate",void 0),(0,v.gn)([(0,s.Output)()],g.prototype,"vsChange",void 0),(0,v.gn)([(0,s.Output)()],g.prototype,"vsStart",void 0),(0,v.gn)([(0,s.Output)()],g.prototype,"vsEnd",void 0),(0,v.gn)([(0,s.ViewChild)("content",{read:s.ElementRef,static:!0})],g.prototype,"contentElementRef",void 0),(0,v.gn)([(0,s.ViewChild)("invisiblePadding",{read:s.ElementRef,static:!0})],g.prototype,"invisiblePaddingElementRef",void 0),(0,v.gn)([(0,s.ContentChild)("header",{read:s.ElementRef,static:!1})],g.prototype,"headerElementRef",void 0),(0,v.gn)([(0,s.ContentChild)("container",{read:s.ElementRef,static:!1})],g.prototype,"containerElementRef",void 0),g=(0,v.gn)([(0,v.fM)(4,(0,s.Inject)(s.PLATFORM_ID)),(0,v.fM)(5,(0,s.Optional)()),(0,v.fM)(5,(0,s.Inject)("virtual-scroller-default-options"))],g);let M=class{};M.\u0275fac=function(e){return new(e||M)},M.\u0275mod=s.\u0275\u0275defineNgModule({type:M}),M.\u0275inj=s.\u0275\u0275defineInjector({providers:[{provide:"virtual-scroller-default-options",useFactory:B}],imports:[V.CommonModule]})},70655:($,H,E)=>{function F(i,r,l,o){var f,u=arguments.length,h=u<3?r:null===o?o=Object.getOwnPropertyDescriptor(r,l):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)h=Reflect.decorate(i,r,l,o);else for(var _=i.length-1;_>=0;_--)(f=i[_])&&(h=(u<3?f(h):u>3?f(r,l,h):f(r,l))||h);return u>3&&h&&Object.defineProperty(r,l,h),h}function R(i,r){return function(l,o){r(l,o,i)}}function U(i,r,l,o){return new(l||(l=Promise))(function(h,f){function _(P){try{m(o.next(P))}catch(O){f(O)}}function b(P){try{m(o.throw(P))}catch(O){f(O)}}function m(P){P.done?h(P.value):function u(h){return h instanceof l?h:new l(function(f){f(h)})}(P.value).then(_,b)}m((o=o.apply(i,r||[])).next())})}function e(i){return this instanceof e?(this.v=i,this):new e(i)}function t(i,r,l){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var u,o=l.apply(i,r||[]),h=[];return u={},f("next"),f("throw"),f("return"),u[Symbol.asyncIterator]=function(){return this},u;function f(y){o[y]&&(u[y]=function(T){return new Promise(function(z,D){h.push([y,T,z,D])>1||_(y,T)})})}function _(y,T){try{!function b(y){y.value instanceof e?Promise.resolve(y.value.v).then(m,P):O(h[0][2],y)}(o[y](T))}catch(z){O(h[0][3],z)}}function m(y){_("next",y)}function P(y){_("throw",y)}function O(y,T){y(T),h.shift(),h.length&&_(h[0][0],h[0][1])}}function n(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var l,r=i[Symbol.asyncIterator];return r?r.call(i):(i=function L(i){var r="function"==typeof Symbol&&Symbol.iterator,l=r&&i[r],o=0;if(l)return l.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&o>=i.length&&(i=void 0),{value:i&&i[o++],done:!i}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")}(i),l={},o("next"),o("throw"),o("return"),l[Symbol.asyncIterator]=function(){return this},l);function o(h){l[h]=i[h]&&function(f){return new Promise(function(_,b){!function u(h,f,_,b){Promise.resolve(b).then(function(m){h({value:m,done:_})},f)}(_,b,(f=i[h](f)).done,f.value)})}}}E.d(H,{FC:()=>t,KL:()=>n,fM:()=>R,gn:()=>F,mG:()=>U,qq:()=>e})}}]);