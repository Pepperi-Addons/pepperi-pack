(self.webpackChunkfile_4817f4fe_9ff6_435e_9415_96b1142675eb=self.webpackChunkfile_4817f4fe_9ff6_435e_9415_96b1142675eb||[]).push([["node_modules_pepperi-addons_ngx-composite-lib_fesm2020_pepperi-addons-ngx-composite-lib-flow--8a29460"],{35261:(F,P,i)=>{i.r(P),i.d(P,{FlowPickerButtonComponent:()=>c,PepFlowPickerButtonModule:()=>s});var h=i(15861),t=i(60562),w=i(62923),a=i(88955),d=i(14291),r=i(42898),_=i(19339),u=i(14768);let l=(()=>{class o{constructor(e){this.httpService=e}searchFlows(e){var n=this;return(0,h.Z)(function*(){return(0,_.lastValueFrom)(yield n.httpService.postPapiApiCall("/user_defined_flows/search",{KeyList:[e],Fields:["Key","Name"]}))})()}}return o.\u0275fac=function(e){return new(e||o)(t.\u0275\u0275inject(a.PepHttpService))},o.\u0275prov=t.\u0275\u0275defineInjectable({token:o,factory:o.\u0275fac,providedIn:"root"}),o})(),c=(()=>{class o{constructor(e,n,m){this.viewContainerRef=e,this.addonBlockLoaderService=n,this.flowPickerService=m,this._flowHostObject=void 0,this.disabled=!1,this.flowChange=new t.EventEmitter,this.choosenFlowName="",this.choosenFlowKey=""}set flowHostObject(e){this._flowHostObject=e,e?.runFlowData?.FlowKey?this.setChoosenFlow(e.runFlowData.FlowKey):this.initChoosenFlow("")}get flowHostObject(){return this._flowHostObject}initChoosenFlow(e){this.choosenFlowKey=e,this.choosenFlowName=""}setChoosenFlow(e){this.choosenFlowKey!==e&&(this.initChoosenFlow(e),this.flowPickerService.searchFlows(e).then(n=>{n?.Objects?.length>0&&(this.choosenFlowName=n.Objects[0].Name||void 0)}))}ngOnInit(){}openFlowPickerDialog(){var e=this;const n=this.addonBlockLoaderService.loadAddonBlockInDialog({container:this.viewContainerRef,name:"FlowPicker",size:"large",hostObject:this.flowHostObject,hostEventsCallback:(m=(0,h.Z)(function*(f){"on-done"===f.action?(f.data?.FlowKey?(e.setChoosenFlow(f.data.FlowKey),e.flowChange.emit(f.data)):(e.initChoosenFlow(""),e.flowChange.emit(null)),n?.close()):"on-cancel"===f.action&&n?.close()}),function(v){return m.apply(this,arguments)})});var m}}return o.\u0275fac=function(e){return new(e||o)(t.\u0275\u0275directiveInject(t.ViewContainerRef),t.\u0275\u0275directiveInject(r.PepAddonBlockLoaderService),t.\u0275\u0275directiveInject(l))},o.\u0275cmp=t.\u0275\u0275defineComponent({type:o,selectors:[["pep-flow-picker-button"]],inputs:{flowHostObject:"flowHostObject",disabled:"disabled"},outputs:{flowChange:"flowChange"},decls:2,vars:4,consts:[[1,"flow-button",3,"value","disabled","buttonClick"]],template:function(e,n){1&e&&(t.\u0275\u0275elementStart(0,"pep-button",0),t.\u0275\u0275listener("buttonClick",function(){return n.openFlowPickerDialog()}),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275elementEnd()),2&e&&t.\u0275\u0275property("value",n.choosenFlowKey?n.choosenFlowName||n.choosenFlowKey:t.\u0275\u0275pipeBind1(1,2,"FLOW_PICKER_BUTTON.CHOOSE_FLOW"))("disabled",n.disabled)},dependencies:[d.PepButtonComponent,u.TranslatePipe],styles:["[_nghost-%COMP%]{width:100%}"]}),o})(),s=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.\u0275\u0275defineNgModule({type:o}),o.\u0275inj=t.\u0275\u0275defineInjector({providers:[l],imports:[w.CommonModule,a.PepNgxLibModule,d.PepButtonModule,r.PepRemoteLoaderModule]}),o})()},15861:(F,P,i)=>{function h(w,a,d,r,_,u,l){try{var c=w[u](l),s=c.value}catch(o){return void d(o)}c.done?a(s):Promise.resolve(s).then(r,_)}function t(w){return function(){var a=this,d=arguments;return new Promise(function(r,_){var u=w.apply(a,d);function l(s){h(u,r,_,l,c,"next",s)}function c(s){h(u,r,_,l,c,"throw",s)}l(void 0)})}}i.d(P,{Z:()=>t})}}]);