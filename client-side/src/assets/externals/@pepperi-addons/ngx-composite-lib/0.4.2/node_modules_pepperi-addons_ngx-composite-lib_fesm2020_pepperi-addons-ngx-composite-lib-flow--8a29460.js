(self.webpackChunkpage_builder=self.webpackChunkpage_builder||[]).push([["node_modules_pepperi-addons_ngx-composite-lib_fesm2020_pepperi-addons-ngx-composite-lib-flow--8a29460"],{35261:(m,c,i)=>{i.r(c),i.d(c,{FlowPickerButtonComponent:()=>P,PepFlowPickerButtonModule:()=>F});var a=i(15861),t=i(60562),h=i(62923),d=i(23445),_=i(45757),p=i(18484),f=i(47593),w=i(14768);let u=(()=>{class o{constructor(e){this.httpService=e}searchFlows(e){var n=this;return(0,a.Z)(function*(){return(0,f.lastValueFrom)(yield n.httpService.postPapiApiCall("/user_defined_flows/search",{KeyList:[e],Fields:["Key","Name"]}))})()}}return o.\u0275fac=function(e){return new(e||o)(t.\u0275\u0275inject(d.PepHttpService))},o.\u0275prov=t.\u0275\u0275defineInjectable({token:o,factory:o.\u0275fac,providedIn:"root"}),o})(),P=(()=>{class o{constructor(e,n,r){this.viewContainerRef=e,this.addonBlockLoaderService=n,this.flowPickerService=r,this._flowHostObject=void 0,this.disabled=!1,this.flowChange=new t.EventEmitter,this.choosenFlowName="",this.choosenFlowKey=""}set flowHostObject(e){this._flowHostObject=e,e?.runFlowData?.FlowKey?this.setChoosenFlow(e.runFlowData.FlowKey):this.initChoosenFlow("")}get flowHostObject(){return this._flowHostObject}initChoosenFlow(e){this.choosenFlowKey=e,this.choosenFlowName=""}setChoosenFlow(e){this.choosenFlowKey!==e&&(this.initChoosenFlow(e),this.flowPickerService.searchFlows(e).then(n=>{n?.Objects?.length>0&&(this.choosenFlowName=n.Objects[0].Name||void 0)}))}ngOnInit(){}openFlowPickerDialog(){var e=this;const n=this.addonBlockLoaderService.loadAddonBlockInDialog({container:this.viewContainerRef,name:"FlowPicker",size:"large",hostObject:this.flowHostObject,hostEventsCallback:(r=(0,a.Z)(function*(s){"on-done"===s.action?(s.data?.FlowKey?(e.setChoosenFlow(s.data.FlowKey),e.flowChange.emit(s.data)):(e.initChoosenFlow(""),e.flowChange.emit(null)),n?.close()):"on-cancel"===s.action&&n?.close()}),function(C){return r.apply(this,arguments)})});var r}}return o.\u0275fac=function(e){return new(e||o)(t.\u0275\u0275directiveInject(t.ViewContainerRef),t.\u0275\u0275directiveInject(p.PepAddonBlockLoaderService),t.\u0275\u0275directiveInject(u))},o.\u0275cmp=t.\u0275\u0275defineComponent({type:o,selectors:[["pep-flow-picker-button"]],inputs:{flowHostObject:"flowHostObject",disabled:"disabled"},outputs:{flowChange:"flowChange"},decls:2,vars:4,consts:[[1,"flow-button",3,"value","disabled","buttonClick"]],template:function(e,n){1&e&&(t.\u0275\u0275elementStart(0,"pep-button",0),t.\u0275\u0275listener("buttonClick",function(){return n.openFlowPickerDialog()}),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275elementEnd()),2&e&&t.\u0275\u0275property("value",n.choosenFlowKey?n.choosenFlowName||n.choosenFlowKey:t.\u0275\u0275pipeBind1(1,2,"FLOW_PICKER_BUTTON.CHOOSE_FLOW"))("disabled",n.disabled)},dependencies:[_.PepButtonComponent,w.TranslatePipe],styles:["[_nghost-%COMP%]{width:100%}"]}),o})(),F=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.\u0275\u0275defineNgModule({type:o}),o.\u0275inj=t.\u0275\u0275defineInjector({providers:[u],imports:[h.CommonModule,d.PepNgxLibModule,_.PepButtonModule,p.PepRemoteLoaderModule]}),o})()}}]);