(self.webpackChunkfile_4817f4fe_9ff6_435e_9415_96b1142675eb=self.webpackChunkfile_4817f4fe_9ff6_435e_9415_96b1142675eb||[]).push([["node_modules_pepperi-addons_ngx-composite-lib_fesm2020_pepperi-addons-ngx-composite-lib-flow--8a29461","node_modules_pepperi-addons_ngx-composite-lib_fesm2020_pepperi-addons-ngx-composite-lib-flow--8a29460"],{35261:(F,m,i)=>{i.r(m),i.d(m,{FlowPickerButtonComponent:()=>c,PepFlowPickerButtonModule:()=>l});var h=i(15861),n=i(60562),w=i(62923),a=i(88955),d=i(14291),r=i(42898),_=i(19339),p=i(14768);let s=(()=>{class o{constructor(e){this.httpService=e}searchFlows(e){var t=this;return(0,h.Z)(function*(){return(0,_.lastValueFrom)(yield t.httpService.postPapiApiCall("/user_defined_flows/search",{KeyList:[e],Fields:["Key","Name"]}))})()}}return o.\u0275fac=function(e){return new(e||o)(n.\u0275\u0275inject(a.PepHttpService))},o.\u0275prov=n.\u0275\u0275defineInjectable({token:o,factory:o.\u0275fac,providedIn:"root"}),o})(),c=(()=>{class o{constructor(e,t,P){this.viewContainerRef=e,this.addonBlockLoaderService=t,this.flowPickerService=P,this._flowHostObject=void 0,this.disabled=!1,this.flowChange=new n.EventEmitter,this.choosenFlowName="",this.choosenFlowKey=""}set flowHostObject(e){this._flowHostObject=e,e?.runFlowData?.FlowKey?this.setChoosenFlow(e.runFlowData.FlowKey):this.initChoosenFlow("")}get flowHostObject(){return this._flowHostObject}initChoosenFlow(e){this.choosenFlowKey=e,this.choosenFlowName=""}setChoosenFlow(e){this.choosenFlowKey!==e&&(this.initChoosenFlow(e),this.flowPickerService.searchFlows(e).then(t=>{t?.Objects?.length>0&&(this.choosenFlowName=t.Objects[0].Name||void 0)}))}ngOnInit(){}openFlowPickerDialog(){var e=this;const t=this.addonBlockLoaderService.loadAddonBlockInDialog({container:this.viewContainerRef,name:"FlowPicker",size:"large",hostObject:this.flowHostObject,hostEventsCallback:(P=(0,h.Z)(function*(f){"on-done"===f.action?(f.data?.FlowKey?(e.setChoosenFlow(f.data.FlowKey),e.flowChange.emit(f.data)):(e.initChoosenFlow(""),e.flowChange.emit(null)),t?.close()):"on-cancel"===f.action&&t?.close()}),function(v){return P.apply(this,arguments)})});var P}}return o.\u0275fac=function(e){return new(e||o)(n.\u0275\u0275directiveInject(n.ViewContainerRef),n.\u0275\u0275directiveInject(r.PepAddonBlockLoaderService),n.\u0275\u0275directiveInject(s))},o.\u0275cmp=n.\u0275\u0275defineComponent({type:o,selectors:[["pep-flow-picker-button"]],inputs:{flowHostObject:"flowHostObject",disabled:"disabled"},outputs:{flowChange:"flowChange"},decls:2,vars:4,consts:[[1,"flow-button",3,"value","disabled","buttonClick"]],template:function(e,t){1&e&&(n.\u0275\u0275elementStart(0,"pep-button",0),n.\u0275\u0275listener("buttonClick",function(){return t.openFlowPickerDialog()}),n.\u0275\u0275pipe(1,"translate"),n.\u0275\u0275elementEnd()),2&e&&n.\u0275\u0275property("value",t.choosenFlowKey?t.choosenFlowName||t.choosenFlowKey:n.\u0275\u0275pipeBind1(1,2,"FLOW_PICKER_BUTTON.CHOOSE_FLOW"))("disabled",t.disabled)},dependencies:[d.PepButtonComponent,p.TranslatePipe],styles:["[_nghost-%COMP%]{width:100%}"]}),o})(),l=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=n.\u0275\u0275defineNgModule({type:o}),o.\u0275inj=n.\u0275\u0275defineInjector({providers:[s],imports:[w.CommonModule,a.PepNgxLibModule,d.PepButtonModule,r.PepRemoteLoaderModule]}),o})()},15861:(F,m,i)=>{function h(w,a,d,r,_,p,s){try{var c=w[p](s),l=c.value}catch(o){return void d(o)}c.done?a(l):Promise.resolve(l).then(r,_)}function n(w){return function(){var a=this,d=arguments;return new Promise(function(r,_){var p=w.apply(a,d);function s(l){h(p,r,_,s,c,"next",l)}function c(l){h(p,r,_,s,c,"throw",l)}s(void 0)})}}i.d(m,{Z:()=>n})}}]);