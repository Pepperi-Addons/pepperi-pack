(self.webpackChunkfile_4817f4fe_9ff6_435e_9415_96b1142675eb=self.webpackChunkfile_4817f4fe_9ff6_435e_9415_96b1142675eb||[]).push([["node_modules_pepperi-addons_ngx-lib_fesm2020_pepperi-addons-ngx-lib-remote-loader_mjs-_37470","node_modules_pepperi-addons_ngx-lib_fesm2020_pepperi-addons-ngx-lib-remote-loader_mjs-_37471"],{23989:(Q,k,p)=>{p.d(k,{Ux:()=>W,_8:()=>h,iz:()=>I});var d=p(60562),n=p(62923),P=p(66231),g=p(40455);let h=(()=>{class l{}return l.\u0275fac=function(i){return new(i||l)},l.\u0275mod=d.\u0275\u0275defineNgModule({type:l}),l.\u0275inj=d.\u0275\u0275defineInjector({imports:[n.CommonModule]}),l})();const u="@angular-architects/module-federation-tools";function _(){const l=window;return l[u]=l[u]||{},l[u]}function y(l){const s=_();return l?l(s):s}function v(l){return Object.assign(_(),l)}function I(l,s=!1){let i;s?(i=`${location.hash.substr(1)}${location.search}`,l.navigateByUrl(i),window.addEventListener("hashchange",()=>{l.navigateByUrl(i)})):(i=`${location.pathname.substr(1)}${location.search}`,l.navigateByUrl(i),window.addEventListener("popstate",()=>{l.navigateByUrl(i)}))}let M=!0,w=!0,L=!0;function O(){const l=window;return l.platform=l.platform||{},l}function S(){return y(l=>l.platformCache)||v({platformCache:new Map}).platformCache}function z(l){if(!w)return l.platformFactory();const s=l.version(),i=s===d.VERSION.full?d.VERSION:s,E="string"==typeof i?i:i.full;let b=S().get(i)||L&&function T(l){const s=O().platform[l];return s instanceof d.PlatformRef?s:null}(E);return b||(b=l.platformFactory(),function K(l,s){w&&(L&&function U(l,s){O().platform[l]=s}(l.full,s),S().set(l,s))}(d.VERSION,b),l.production&&(0,d.enableProdMode)()),b}function W(l,s){return M=!1!==s.ngZoneSharing,w=!1!==s.platformSharing,L=!1!==s.activeLegacyMode,s.platformFactory=s.platformFactory||(()=>(0,g.platformBrowser)()),s.version=s.version||(()=>d.VERSION),M&&!s.compilerOptions?.ngZone&&(s.compilerOptions=s.compilerOptions||{},s.compilerOptions.ngZone=function B(){return y(l=>l.ngZone)||function j(){return window.ngZone}()}()),z(s).bootstrapModule(l,s.compilerOptions).then(i=>("shell"===s.appType?function A(l){const s=l.get(d.NgZone,null);s?function F(l){M&&(L&&function G(l){window.ngZone=l}(l),v({ngZone:l}))}(s):console.warn("No NgZone to share found")}(i.injector):"microfrontend"===s.appType&&function V(l){const s=l.get(P.Router),i=location.href.includes("#");s?I(s,i):console.warn("No router to connect found")}(i.injector),i))}},97382:(Q,k,p)=>{p.r(k),p.d(k,{PepAddonBlockLoaderComponent:()=>Y,PepAddonBlockLoaderService:()=>q,PepRemoteLoaderComponent:()=>J,PepRemoteLoaderElementComponent:()=>X,PepRemoteLoaderModule:()=>de,PepRemoteLoaderService:()=>Z});var d=p(15861),n=p(60562),P=p(20925),g=p(88955),R=p(62923),C=p(9825);let h={};const u={},_={};let y=!1;function v(t,a){return x.apply(this,arguments)}function x(){return(x=(0,d.Z)(function*(t,a){return(yield u[t].get(a))()})).apply(this,arguments)}function $(t,a){return I.apply(this,arguments)}function I(){return(I=(0,d.Z)(function*(t,a){return _[a]||(y||(yield p.I("default"),y=!0),yield t.init(p.S.default),_[a]=!0),t})).apply(this,arguments)}function M(t,a){return w.apply(this,arguments)}function w(){return(w=(0,d.Z)(function*(t,a){if("string"==typeof t)return yield O(t,a);if("script"===t.type){const e=t;return yield O(e.remoteEntry,e.remoteName)}"module"===t.type&&(yield L(t.remoteEntry))})).apply(this,arguments)}function L(t){return D.apply(this,arguments)}function D(){return(D=(0,d.Z)(function*(t){return u[t]?Promise.resolve():yield import(t).then(a=>{$(a,t),u[t]=a})})).apply(this,arguments)}function O(t,a){return T.apply(this,arguments)}function T(){return(T=(0,d.Z)(function*(t,a){return new Promise((e,o)=>{if(u[a])return void e();const r=document.createElement("script");r.src=t,r.onerror=o,r.onload=()=>{const c=window[a];$(c,a),u[a]=c,e()},document.body.appendChild(r)})})).apply(this,arguments)}function U(t){return j.apply(this,arguments)}function j(){return(j=(0,d.Z)(function*(t){let a,e,o;if(t.type||(t.type="script"),"manifest"===t.type){const r=h[t.remoteName];if(!r)throw new Error("Manifest does not contain "+t.remoteName);t={type:r.type,exposedModule:t.exposedModule,remoteEntry:r.remoteEntry,remoteName:"script"===r.type?t.remoteName:void 0},o=r.remoteEntry}else o=t.remoteEntry;return"script"===t.type?(a={type:"script",remoteEntry:t.remoteEntry,remoteName:t.remoteName},e=t.remoteName):"module"===t.type&&(a={type:"module",remoteEntry:t.remoteEntry},e=t.remoteEntry),o&&(yield M(a)),yield v(e,t.exposedModule)})).apply(this,arguments)}var V=p(66231),l=p(72851),s=p(61111),i=p(23989);const E=["placeHolder"];function b(t,a){}const ee=["dialogTemplate"];function te(t,a){1&t&&n.\u0275\u0275elementContainer(0)}function ne(t,a){if(1&t&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,te,1,0,"ng-container",3),n.\u0275\u0275elementContainerEnd()),2&t){n.\u0275\u0275nextContext();const e=n.\u0275\u0275reference(4);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngTemplateOutlet",e)}}function oe(t,a){1&t&&n.\u0275\u0275elementContainer(0)}function re(t,a){if(1&t){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"pep-dialog",4),n.\u0275\u0275listener("close",function(r){n.\u0275\u0275restoreView(e);const c=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(c.closeDialog(r))}),n.\u0275\u0275elementContainerStart(1,5),n.\u0275\u0275template(2,oe,1,0,"ng-container",3),n.\u0275\u0275elementContainerEnd(),n.\u0275\u0275elementEnd()}if(2&t){const e=a.$implicit;n.\u0275\u0275nextContext();const o=n.\u0275\u0275reference(4);n.\u0275\u0275property("showClose",null==e?null:e.showClose)("showHeader",null==e?null:e.showHeader)("showFooter",null==e?null:e.showFooter)("title",null==e?null:e.title),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngTemplateOutlet",o)}}function le(t,a){if(1&t){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"pep-remote-loader",8),n.\u0275\u0275listener("hostEvents",function(r){n.\u0275\u0275restoreView(e);const c=n.\u0275\u0275nextContext(2);return n.\u0275\u0275resetView(c.onHostEvents(r))})("load",function(){n.\u0275\u0275restoreView(e);const r=n.\u0275\u0275nextContext(2);return n.\u0275\u0275resetView(r.onBlockLoad())}),n.\u0275\u0275elementEnd()}if(2&t){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("options",e.remotePathOptions)("hostObject",e.hostObject)}}const ae=function(t){return{hostObject:t}},se=function(t){return{hostEvents:t}};function ie(t,a){if(1&t){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"pep-remote-loader-element",9),n.\u0275\u0275listener("load",function(){n.\u0275\u0275restoreView(e);const r=n.\u0275\u0275nextContext(2);return n.\u0275\u0275resetView(r.onBlockLoad())}),n.\u0275\u0275elementEnd()}if(2&t){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("options",e.remotePathOptions)("props",n.\u0275\u0275pureFunction1(3,ae,e.hostObject))("events",n.\u0275\u0275pureFunction1(5,se,e.onHostEventsCallback))}}function ce(t,a){if(1&t&&(n.\u0275\u0275template(0,le,1,2,"pep-remote-loader",6),n.\u0275\u0275template(1,ie,1,7,"pep-remote-loader-element",7)),2&t){const e=n.\u0275\u0275nextContext();n.\u0275\u0275property("ngIf",e.remotePathOptions&&!e.loadElement),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.remotePathOptions&&e.loadElement)}}let Z=(()=>{class t{constructor(e,o,r){this.httpService=e,this.sessionService=o,this.addonService=r}getBlockLoaderDataUrl(e){const o="addon_blocks",r=this.addonService.getPagesAddonUUID();let c;return c=e.pagesDevServer?.length>0?`${e.pagesDevServer}/${o}`:`${this.sessionService.getPapiBaseUrl()}/addons/api/${r}/${o}`,`${c}/get_addon_block_loader_data?name=${e.name}&slugName=${e.slugName}&blockType=${e.blockType}&addonUUID=${e.addonUUID}`}getRemoteLoaderOptions(e,o="",r="module"){const m={type:r,remoteEntry:o.length>0?o:`${e.addonPublicBaseURL}${e.relation.AddonRelativeURL}.js`,remoteName:e.relation.AddonRelativeURL,exposedModule:`./${e.relation.ElementsModule?.length>0?e.relation.ElementsModule:e.relation.ModuleName}`,addonId:e.relation.AddonUUID};return e.relation.ElementsModule?.length>0?m.elementName=e.relation.ElementName:m.componentName=e.relation.ComponentName,m}getBlockRemoteLoaderOptions(e){var o=this;return(0,d.Z)(function*(){return e.blockType=e.blockType??"AddonBlock",e.name=e.name??"",e.slugName=e.slugName??"",e.addonUUID=e.addonUUID??"",new Promise((r,c)=>{if(e.name?.length>0||e.slugName?.length>0&&"SettingsBlock"===e.blockType){const m=o.getBlockLoaderDataUrl(e);o.httpService.getHttpCall(m).toPromise().then(f=>{const H=(0,P.coerceNumberProperty)(f.relation?.SubType?.toLocaleLowerCase().replace("ng",""),14)>=14?"module":"script";r(o.getRemoteLoaderOptions(f,e.blockRemoteEntry,H))}).catch(f=>{c(`Block with ${"SettingsBlock"===e.blockType?`slugName - ${e.slugName}`:`name - ${e.name}`} is not found for type - ${e.blockType}`)})}else c("SettingsBlock"===e.blockType?"slugName is not supplied":"name is not supplied")})})()}}return t.\u0275fac=function(e){return new(e||t)(n.\u0275\u0275inject(g.PepHttpService),n.\u0275\u0275inject(g.PepSessionService),n.\u0275\u0275inject(g.PepAddonService))},t.\u0275prov=n.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),J=(()=>{class t{constructor(e,o){this.injector=e,this.pepAddonService=o,this._options=null,this._hostObject=null,this.hostEvents=new n.EventEmitter,this.load=new n.EventEmitter}set options(e){this._options=e,e&&this.loadModule()}get options(){return this._options}set hostObject(e){this._hostObject=e,this.setHostComponentIntoComponentRef()}get hostObject(){return this._hostObject}setHostComponentIntoComponentRef(){this.hostObject&&this.compRef?.instance&&(this.compRef.instance.hostObject=this.hostObject)}ngOnChanges(e){}loadModule(){var e=this;return(0,d.Z)(function*(){try{const o=performance.now();if(e.viewContainer?.clear(),e.options.exposedModule?.length>0){if(e.options?.addonId&&("module"===e.options.type||"script"===e.options.type)){const f=e.options.remoteEntry?.lastIndexOf("/")||-1;if(f>0){const N=e.options.remoteEntry.substring(0,f+1);e.pepAddonService.setAddonStaticFolder(N,e.options.addonId)}}const r=yield U(e.options).then(f=>f),c=(0,n.createNgModuleRef)(r[e.options.exposedModule.replace("./","")],e.injector);e.compRef=e.viewContainer.createComponent(r[e.options.componentName],{injector:e.injector,ngModuleRef:c});const m=performance.now();console.log("remote module load performance: "+(m-o)/1e3)}e.load.emit(),e.compRef&&(e.setHostComponentIntoComponentRef(),e.compRef?.instance.hostEvents?.subscribe(r=>{e.hostEvents.emit(r)}))}catch(o){console.error(o)}})()}ngOnDestroy(){this.compRef?.destroy(),this.viewContainer?.clear()}}return t.\u0275fac=function(e){return new(e||t)(n.\u0275\u0275directiveInject(n.Injector),n.\u0275\u0275directiveInject(g.PepAddonService))},t.\u0275cmp=n.\u0275\u0275defineComponent({type:t,selectors:[["pep-remote-loader"]],viewQuery:function(e,o){if(1&e&&n.\u0275\u0275viewQuery(E,7,n.ViewContainerRef),2&e){let r;n.\u0275\u0275queryRefresh(r=n.\u0275\u0275loadQuery())&&(o.viewContainer=r.first)}},inputs:{options:"options",hostObject:"hostObject"},outputs:{hostEvents:"hostEvents",load:"load"},features:[n.\u0275\u0275NgOnChangesFeature],decls:2,vars:0,consts:[["placeHolder",""]],template:function(e,o){1&e&&n.\u0275\u0275template(0,b,0,0,"ng-template",null,0,n.\u0275\u0275templateRefExtractor)},encapsulation:2}),t})(),X=(()=>{class t{constructor(e,o,r,c,m){this.renderer=e,this.el=o,this.pepAddonService=r,this.remoteLoaderService=c,this.route=m,this.load=new n.EventEmitter,this.element=null,this._elementName=""}populateProps(){for(const e in this.props)this.element[e]=this.props[e]}setupEvents(){for(const e in this.events)this.element.addEventListener(e,this.events[e])}loadOptionsFromRoute(){var e=this;return(0,d.Z)(function*(){const o=e.route?.snapshot.params,r=e.route?.snapshot.data,c=r?.blockType||"SettingsBlock",m=o?.slugName||r?.slugName,f=o?.blockName||r?.blockName;if(f?.length>0||m?.length>0&&"SettingsBlock"===c){const N=o?.addonUUID||r?.addonUUID||"",H=r?.blockRemoteEntry||"";e.options=yield e.remoteLoaderService.getBlockRemoteLoaderOptions({name:f,slugName:m,blockType:c,addonUUID:N,blockRemoteEntry:H});const pe=`${e.options.remoteName}.js`;window.location.search.indexOf("dev=true")>0&&(e.options.remoteEntry=`http://localhost:4400/${pe}`),e.props=r}})()}ngOnChanges(){!this.element||this.populateProps()}ngOnDestroy(){}ngAfterContentInit(){var e=this;return(0,d.Z)(function*(){try{const o=performance.now();if(e.options||(yield e.loadOptionsFromRoute()),!e.options)throw new Error("No options supplied to the component.");{if(e.options?.addonId&&("module"===e.options.type||"script"===e.options.type)){const c=e.options.remoteEntry?.lastIndexOf("/")||-1;if(c>0){const m=e.options.remoteEntry.substring(0,c+1);e.pepAddonService.setAddonStaticFolder(m,e.options.addonId)}}yield U(e.options),e._elementName=e.options.elementName,e.element=e.renderer.createElement(e._elementName),e.populateProps(),e.setupEvents(),e.renderer.appendChild(e.el.nativeElement,e.element);const r=performance.now();console.log("remote module wc load performance: "+(r-o)/1e3),e.pepAddonService.connectInternalRouter(e._elementName),e.load.emit()}}catch(o){console.error(o)}})()}}return t.\u0275fac=function(e){return new(e||t)(n.\u0275\u0275directiveInject(n.Renderer2),n.\u0275\u0275directiveInject(n.ElementRef),n.\u0275\u0275directiveInject(g.PepAddonService),n.\u0275\u0275directiveInject(Z),n.\u0275\u0275directiveInject(V.ActivatedRoute,8))},t.\u0275cmp=n.\u0275\u0275defineComponent({type:t,selectors:[["pep-remote-loader-element"]],inputs:{options:"options",props:"props",events:"events"},outputs:{load:"load"},features:[n.\u0275\u0275NgOnChangesFeature],decls:0,vars:0,template:function(e,o){},styles:["[_nghost-%COMP%]{width:100%;height:inherit}[_nghost-%COMP%] >*{height:inherit}"]}),t})(),Y=(()=>{class t{constructor(e){this.remoteLoaderService=e,this.addonId="",this.remoteEntry="",this.slugName="",this._blockType="AddonBlock",this._name="",this.hostObject=null,this._dialogRef=null,this.hostEvents=new n.EventEmitter,this.blockLoad=new n.EventEmitter,this.inDialog=!1,this.remotePathOptions=null,this.loadElement=!1,this.onHostEventsCallback=o=>{this.onHostEvents(o.detail)}}set blockType(e){this._blockType=e}get blockType(){return this._blockType}set name(e){this._name=e}get name(){return this._name}set dialogRef(e){this._dialogRef=e,this.inDialog=null!=this._dialogRef}get dialogRef(){return this._dialogRef}ngOnInit(){this.remoteLoaderService.getBlockRemoteLoaderOptions({name:this.name,slugName:this.slugName,blockType:this.blockType,addonUUID:this.addonId,blockRemoteEntry:this.remoteEntry}).then(o=>{this.loadElement=o.elementName?.length>0,this.remotePathOptions=o})}ngOnDestroy(){this.dialogRef&&(this.dialogRef=null),this.remotePathOptions=null}onBlockLoad(){this.blockLoad.emit()}onHostEvents(e){this.hostEvents.emit(e)}closeDialog(e){this.dialogRef?.close(e)}}return t.\u0275fac=function(e){return new(e||t)(n.\u0275\u0275directiveInject(Z))},t.\u0275cmp=n.\u0275\u0275defineComponent({type:t,selectors:[["pep-addon-block-loader"]],viewQuery:function(e,o){if(1&e&&n.\u0275\u0275viewQuery(ee,7,n.TemplateRef),2&e){let r;n.\u0275\u0275queryRefresh(r=n.\u0275\u0275loadQuery())&&(o.dialogTemplate=r.first)}},inputs:{addonId:"addonId",remoteEntry:"remoteEntry",slugName:"slugName",blockType:"blockType",name:"name",hostObject:"hostObject",dialogRef:"dialogRef"},outputs:{hostEvents:"hostEvents",blockLoad:"blockLoad"},decls:5,vars:1,consts:[[4,"ngIf"],["dialogTemplate",""],["remoteLoaderTemplate",""],[4,"ngTemplateOutlet"],[3,"showClose","showHeader","showFooter","title","close"],["pep-dialog-content",""],[3,"options","hostObject","hostEvents","load",4,"ngIf"],[3,"options","props","events","load",4,"ngIf"],[3,"options","hostObject","hostEvents","load"],[3,"options","props","events","load"]],template:function(e,o){1&e&&(n.\u0275\u0275template(0,ne,2,1,"ng-container",0),n.\u0275\u0275template(1,re,3,5,"ng-template",null,1,n.\u0275\u0275templateRefExtractor),n.\u0275\u0275template(3,ce,2,2,"ng-template",null,2,n.\u0275\u0275templateRefExtractor)),2&e&&n.\u0275\u0275property("ngIf",!o.inDialog)},dependencies:[R.NgIf,R.NgTemplateOutlet,C.PepDialogComponent,J,X]}),t})(),q=(()=>{class t{constructor(e){this.dialogService=e}loadAddonBlockInternal(e){if(null!==e.container){const o=e.container.createComponent(Y),r=o.instance;return r.name=e.name,r.slugName=e.slugName,r.blockType=e.blockType||"AddonBlock",r.addonId=e.addonUUID,r.remoteEntry=e.blockRemoteEntry,r.hostObject=e.hostObject,r.hostEvents.subscribe(c=>{e.hostEventsCallback&&e.hostEventsCallback(c)}),o}return null}loadAddonBlockInContainer(e){return this.loadAddonBlockInternal(e)}loadAddonBlockInDialog(e){const o=this.loadAddonBlockInternal(e);if(o){const r=o.instance,c=this.dialogService.getDialogConfig({disableClose:!1,panelClass:"remote-loader-dialog"},e.size||"full-screen"),m={...e.config,...c};return r.dialogRef=this.dialogService.openDialog(r.dialogTemplate,e.data||null,m),r.dialogRef.afterClosed().subscribe(()=>{o.hostView.detach(),o.hostView.destroy(),o.destroy()}),r.dialogRef}return null}}return t.\u0275fac=function(e){return new(e||t)(n.\u0275\u0275inject(C.PepDialogService))},t.\u0275prov=n.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),de=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=n.\u0275\u0275defineInjector({providers:[q,Z],imports:[R.CommonModule,l.HttpClientModule,i._8,s.MatDialogModule,g.PepNgxLibModule,C.PepDialogModule]}),t})()},15861:(Q,k,p)=>{function d(P,g,R,C,h,u,_){try{var y=P[u](_),v=y.value}catch(x){return void R(x)}y.done?g(v):Promise.resolve(v).then(C,h)}function n(P){return function(){var g=this,R=arguments;return new Promise(function(C,h){var u=P.apply(g,R);function _(v){d(u,C,h,_,y,"next",v)}function y(v){d(u,C,h,_,y,"throw",v)}_(void 0)})}}p.d(k,{Z:()=>n})}}]);