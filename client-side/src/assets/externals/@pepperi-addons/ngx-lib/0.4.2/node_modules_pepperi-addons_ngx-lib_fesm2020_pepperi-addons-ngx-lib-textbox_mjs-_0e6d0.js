(self.webpackChunkpage_builder=self.webpackChunkpage_builder||[]).push([["node_modules_pepperi-addons_ngx-lib_fesm2020_pepperi-addons-ngx-lib-textbox_mjs-_0e6d0","node_modules_pepperi-addons_ngx-lib_fesm2020_pepperi-addons-ngx-lib-textbox_mjs-_0e6d1"],{59271:(ve,d,l)=>{l.r(d),l.d(d,{PepTextboxComponent:()=>Ce,PepTextboxModule:()=>be});var e=l(60562),p=l(62923),c=l(51959),V=l(51358),x=l(60582),_=l(12906),h=l(48547),g=l(35660),s=l(23445),u=l(56604),f=l(31271),y=l(69399),C=l(47593),I=l(20925),b=l(14768);const P=["input"];function S(n,r){if(1&n&&e.\u0275\u0275element(0,"pep-field-title",10),2&n){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(3),a=e.\u0275\u0275nextContext();e.\u0275\u0275property("label",a.label)("mandatory",a.mandatory)("disabled",a.disabled)("maxFieldCharacters",a.maxFieldCharacters)("hint",a.hint)("xAlignment",a.xAlignment)("showTitle",a.showTitle)("inputLength",null==t.value?null:t.value.length)}}function F(n,r){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"span",11)(1,"a",12),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(i.anchorClicked())}),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()}if(2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("id",t.key)("name",t.key),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.formattedValue,"")}}function D(n,r){1&n&&e.\u0275\u0275elementContainer(0)}const m=function(n){return{field:n}};function M(n,r){if(1&n&&(e.\u0275\u0275element(0,"span",16),e.\u0275\u0275pipe(1,"translate"),e.\u0275\u0275pipe(2,"translate")),2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("title",e.\u0275\u0275pipeBind2(1,2,"MESSAGES.ERROR_IS_REQUIRED",e.\u0275\u0275pureFunction1(8,m,t.label)))("innerText",e.\u0275\u0275pipeBind2(2,5,"MESSAGES.ERROR_IS_REQUIRED",e.\u0275\u0275pureFunction1(10,m,t.label)))}}function N(n,r){}function A(n,r){1&n&&e.\u0275\u0275template(0,N,0,0,"ng-template")}function w(n,r){if(1&n&&(e.\u0275\u0275elementStart(0,"span",19),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.regexError," ")}}const T=function(n,r){return{min:n,max:r}};function k(n,r){if(1&n&&(e.\u0275\u0275element(0,"span",16),e.\u0275\u0275pipe(1,"pepToNumber"),e.\u0275\u0275pipe(2,"pepToNumber"),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275pipe(5,"pepToNumber"),e.\u0275\u0275pipe(6,"pepToNumber"),e.\u0275\u0275pipe(7,"translate"),e.\u0275\u0275pipe(8,"translate")),2&n){e.\u0275\u0275nextContext(3);const t=e.\u0275\u0275reference(3),a=e.\u0275\u0275nextContext();e.\u0275\u0275property("title",e.\u0275\u0275pipeBind1(1,2,t.value)>a.maxValue||e.\u0275\u0275pipeBind1(2,4,t.value)<a.minValue?e.\u0275\u0275pipeBind2(3,6,"MESSAGES.ERROR_RANGE_IS_NOT_VALID",e.\u0275\u0275pureFunction2(22,T,a.minValue,a.maxValue)):e.\u0275\u0275pipeBind2(4,9,"MESSAGES.ERROR_IS_NOT_VALID",e.\u0275\u0275pureFunction1(25,m,a.label)))("innerText",e.\u0275\u0275pipeBind1(5,12,t.value)>a.maxValue||e.\u0275\u0275pipeBind1(6,14,t.value)<a.minValue?e.\u0275\u0275pipeBind2(7,16,"MESSAGES.ERROR_RANGE_IS_NOT_VALID",e.\u0275\u0275pureFunction2(27,T,a.minValue,a.maxValue)):e.\u0275\u0275pipeBind2(8,19,"MESSAGES.ERROR_IS_NOT_VALID",e.\u0275\u0275pureFunction1(30,m,a.label)))}}function O(n,r){if(1&n&&(e.\u0275\u0275template(0,A,1,0,null,13),e.\u0275\u0275template(1,w,2,1,"ng-template",null,17,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(3,k,9,32,"ng-template",null,18,e.\u0275\u0275templateRefExtractor)),2&n){const t=e.\u0275\u0275reference(2),a=e.\u0275\u0275reference(4),i=e.\u0275\u0275nextContext(3);let o;e.\u0275\u0275property("ngIf",i.regex&&(null==i.form||null==(o=i.form.get(i.key))||null==o.errors?null:o.errors.pattern))("ngIfThen",t)("ngIfElse",a)}}function R(n,r){if(1&n&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275template(1,D,1,0,"ng-container",13),e.\u0275\u0275template(2,M,3,12,"ng-template",null,14,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(4,O,5,3,"ng-template",null,15,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275reference(3),a=e.\u0275\u0275reference(5);e.\u0275\u0275nextContext();const i=e.\u0275\u0275reference(3),o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",o.mandatory&&0==i.value.length)("ngIfThen",t)("ngIfElse",a)}}function B(n,r){if(1&n&&e.\u0275\u0275element(0,"pep-textbox-icon",20),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("value",t.value)("label",t.label)("type",t.type)("disabled",t.disabled)}}function L(n,r){if(1&n&&e.\u0275\u0275element(0,"pep-textbox-icon",21),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("value",t.value)("label",t.label)("type",t.type)("disabled",t.disabled)}}const K=function(n,r){return{color:n,"text-align":r}},U=function(n){return{"disable-hidden":n}};function j(n,r){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275template(0,S,1,8,"pep-field-title",3),e.\u0275\u0275elementStart(1,"mat-form-field",4)(2,"input",5,6),e.\u0275\u0275listener("keyup.enter",function(i){return null==i||null==i.currentTarget?null:i.currentTarget.blur()})("focus",function(i){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(o.onFocus(i))})("blur",function(i){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(o.onBlur(i))})("change",function(i){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(o.onChange(i))})("keyup",function(i){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(o.onKeyup(i))}),e.\u0275\u0275pipe(4,"async"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(5,F,3,3,"span",7),e.\u0275\u0275template(6,R,6,3,"mat-error",2),e.\u0275\u0275template(7,B,1,4,"pep-textbox-icon",8),e.\u0275\u0275template(8,L,1,4,"pep-textbox-icon",9),e.\u0275\u0275elementEnd()}if(2&n){const t=r.isFormView,a=r.hasParent,i=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",i.renderTitle&&t&&!a),e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("maxlength",i.maxFieldCharacters>0?i.maxFieldCharacters:99999),e.\u0275\u0275propertyInterpolate("title",i.formattedValue),e.\u0275\u0275property("formControlName",i.key)("id",i.key)("name",i.key)("placeholder",a&&!i.disabled?i.placeholder:"")("ngStyle",e.\u0275\u0275pureFunction2(17,K,i.textColor,"center"==i.xAlignment?"center":"right"==i.xAlignment?"right":"left"))("type",i.type)("value",e.\u0275\u0275pipeBind1(4,15,i.displayValue$))("ngClass",e.\u0275\u0275pureFunction1(20,U,i.disabled&&(null==i.formattedValue?null:i.formattedValue.length)>0&&("phone"===i.type||"email"===i.type||"link"===i.type))),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",i.disabled&&(null==i.formattedValue?null:i.formattedValue.length)>0&&("phone"===i.type||"email"===i.type||"link"===i.type)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",i.renderError),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",i.renderSymbol&&t&&"right"==i.xAlignment),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",i.renderSymbol&&t&&"left"==i.xAlignment)}}function G(n,r){1&n&&e.\u0275\u0275elementContainer(0)}function W(n,r){1&n&&e.\u0275\u0275elementContainer(0)}const Q=function(){return{isFormView:!0,hasParent:!1}};function z(n,r){if(1&n&&e.\u0275\u0275template(0,W,1,0,"ng-container",24),2&n){e.\u0275\u0275nextContext(2);const t=e.\u0275\u0275reference(2);e.\u0275\u0275property("ngTemplateOutlet",t)("ngTemplateOutletContext",e.\u0275\u0275pureFunction0(2,Q))}}function H(n,r){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0,25),e.\u0275\u0275elementStart(1,"mat-form-field",4)(2,"input",26),e.\u0275\u0275listener("blur",function(i){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(o.onBlur(i))})("change",function(i){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(o.onChange(i))})("keyup",function(i){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(o.onKeyup(i))})("keyup.enter",function(i){return null==i||null==i.currentTarget?null:i.currentTarget.blur()})("focus",function(i){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(o.onFocus(i))}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd()}if(2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("formGroupName",t.parentFieldKey),e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("title",t.formattedValue),e.\u0275\u0275property("id",t.key)("name",t.key)("placeholder",t.disabled?"":t.placeholder)("formControlName",t.key)("value",t.value)}}function Z(n,r){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,G,1,0,"ng-container",13),e.\u0275\u0275template(2,z,1,3,"ng-template",null,22,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(4,H,3,7,"ng-template",null,23,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275reference(3),a=e.\u0275\u0275reference(5),i=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",i.parentFieldKey)("ngIfThen",a)("ngIfElse",t)}}function J(n,r){1&n&&e.\u0275\u0275elementContainer(0)}function X(n,r){1&n&&e.\u0275\u0275elementContainer(0)}const Y=function(n){return{"one-row":n}},v=function(){return{isFormView:!1,hasParent:!1}};function $(n,r){if(1&n&&(e.\u0275\u0275elementStart(0,"div",29),e.\u0275\u0275template(1,X,1,0,"ng-container",24),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2),a=e.\u0275\u0275reference(2);e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(3,Y,1===t.rowSpan)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngTemplateOutlet",a)("ngTemplateOutletContext",e.\u0275\u0275pureFunction0(5,v))}}function q(n,r){if(1&n&&(e.\u0275\u0275elementStart(0,"span",34),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275propertyInterpolate("title",t.label),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("",t.label,"\xa0")}}function ee(n,r){1&n&&(e.\u0275\u0275elementStart(0,"button",35)(1,"mat-icon"),e.\u0275\u0275element(2,"pep-icon",36),e.\u0275\u0275elementEnd()())}const E=function(n){return{color:n}},te=function(n,r,t){return{"one-row":n,"multi-rows":r,"pep-button weak":t}},ne=function(n){return{"multi-rows-text":n}},ie=function(n){return{"-webkit-line-clamp":n}};function ae(n,r){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",30),e.\u0275\u0275listener("click",function(i){e.\u0275\u0275restoreView(t);const o=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(o.disabled?"":o.cardTemplateClicked(i))}),e.\u0275\u0275template(1,q,2,2,"span",31),e.\u0275\u0275elementStart(2,"span",32),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,ee,3,0,"button",33),e.\u0275\u0275elementEnd()}if(2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275classMap("text-align-"+t.xAlignment),e.\u0275\u0275property("ngStyle",e.\u0275\u0275pureFunction1(11,E,t.textColor))("ngClass",e.\u0275\u0275pureFunction3(13,te,1===t.rowSpan,t.rowSpan>1,t.isActive&&!t.disabled)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.showTitle&&""!=t.label),e.\u0275\u0275advance(1),e.\u0275\u0275propertyInterpolate("title",t.formattedValue),e.\u0275\u0275property("id",t.key)("ngClass",e.\u0275\u0275pureFunction1(17,ne,t.rowSpan>1))("ngStyle",e.\u0275\u0275pureFunction1(19,ie,t.rowSpan)),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.formattedValue),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.isActive&&!t.disabled)}}function re(n,r){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,J,1,0,"ng-container",13),e.\u0275\u0275template(2,$,2,6,"ng-template",null,27,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(4,ae,5,21,"ng-template",null,28,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275reference(3),a=e.\u0275\u0275reference(5),i=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",i.isInEditMode)("ngIfThen",t)("ngIfElse",a)}}function oe(n,r){1&n&&e.\u0275\u0275elementContainer(0)}function le(n,r){1&n&&e.\u0275\u0275elementContainer(0)}function se(n,r){if(1&n&&e.\u0275\u0275template(0,le,1,0,"ng-container",24),2&n){e.\u0275\u0275nextContext(2);const t=e.\u0275\u0275reference(2);e.\u0275\u0275property("ngTemplateOutlet",t)("ngTemplateOutletContext",e.\u0275\u0275pureFunction0(2,v))}}function pe(n,r){1&n&&e.\u0275\u0275elementContainer(0)}const ce=function(n){return{disable:n}};function _e(n,r){if(1&n&&(e.\u0275\u0275elementStart(0,"a",45),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(5);e.\u0275\u0275propertyInterpolate("title",t.formattedValue),e.\u0275\u0275propertyInterpolate("href",t.value?t.value:t.formattedValue,e.\u0275\u0275sanitizeUrl),e.\u0275\u0275property("id",t.key)("ngClass",e.\u0275\u0275pureFunction1(5,ce,t.disabled&&""===t.value)),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.formattedValue)}}function ue(n,r){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,_e,2,7,"a",44),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null!=t.formattedValue)}}const me=function(n){return{readonly:n}};function de(n,r){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"span",46),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(1),e.\u0275\u0275propertyInterpolate("title",t.formattedValue),e.\u0275\u0275property("id",t.key)("ngClass",e.\u0275\u0275pureFunction1(5,me,t.disabled))("ngStyle",e.\u0275\u0275pureFunction1(7,E,t.textColor)),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.formattedValue)}}function xe(n,r){if(1&n&&(e.\u0275\u0275elementContainerStart(0,41),e.\u0275\u0275template(1,ue,2,1,"ng-container",42),e.\u0275\u0275template(2,de,3,9,"ng-container",43),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("ngSwitch",t.type),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase","link")}}function he(n,r){if(1&n&&(e.\u0275\u0275elementStart(0,"span",47),e.\u0275\u0275text(1,"\xa0"),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("id",t.key)}}function ge(n,r){if(1&n&&(e.\u0275\u0275template(0,pe,1,0,"ng-container",13),e.\u0275\u0275template(1,xe,3,2,"ng-template",null,39,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(3,he,2,1,"ng-template",null,40,e.\u0275\u0275templateRefExtractor)),2&n){const t=e.\u0275\u0275reference(2),a=e.\u0275\u0275reference(4),i=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngIf",(null==i.formattedValue?null:i.formattedValue.length)>0)("ngIfThen",t)("ngIfElse",a)}}function fe(n,r){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,oe,1,0,"ng-container",13),e.\u0275\u0275template(2,se,1,3,"ng-template",null,37,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(4,ge,5,3,"ng-template",null,38,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275reference(3),a=e.\u0275\u0275reference(5),i=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",i.isActive&&!i.disabled)("ngIfThen",t)("ngIfElse",a)}}let ye=(()=>{class n{constructor(t,a,i){this.hostElement=t,this.utilitiesService=a,this.validatorService=i,this.type="text",this.previousValue=""}ngOnInit(){}isNumber(){return this.isInteger()||this.isDecimal()}isInteger(){return"int"===this.type}isDecimal(){return"currency"===this.type||"percentage"===this.type||"real"===this.type}isPhone(){return"phone"===this.type}isText(){return"email"===this.type||"link"===this.type||"text"===this.type}onChange(t){this.validateValue(this.hostElement.nativeElement.value)}onKeyDown(t){const a=t.target.value;if(this.isNumber()){if(this.previousValue=a,this.validatorService.isNumber(t,this.isDecimal()))return;t.preventDefault()}else if(this.isPhone()){if(this.validatorService.isPhone(t))return;t.preventDefault()}}validateValue(t){if(console.log(`validateValue start value is - ${t}`),this.isNumber()){const a=this.validatorService.validateNumber(t,this.isDecimal());console.log(`after validateNumber newValue is - ${a}`),this.hostElement.nativeElement.value=a?this.utilitiesService.changeDecimalSeparatorWhenItsComma(a):0}else if(this.isPhone()){const a=this.validatorService.validatePhone(t);this.hostElement.nativeElement.value=a?t:this.previousValue}else this.isText()&&(this.hostElement.nativeElement.value=t)}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275directiveInject(e.ElementRef),e.\u0275\u0275directiveInject(s.PepUtilitiesService),e.\u0275\u0275directiveInject(s.PepValidatorService))},n.\u0275dir=e.\u0275\u0275defineDirective({type:n,selectors:[["","pepTextboxValidation",""]],hostBindings:function(t,a){1&t&&e.\u0275\u0275listener("change",function(o){return a.onChange(o)})("keydown",function(o){return a.onKeyDown(o)})},inputs:{type:"type"}}),n})(),Ce=(()=>{class n{constructor(t,a,i,o,Te){this.customizationService=t,this.renderer=a,this.element=i,this.translate=o,this.utilitiesService=Te,this.dataQa="",this._key="",this._value="",this.formattedValue="",this._minFractionDigits=NaN,this._maxFractionDigits=NaN,this.accessory="",this.label="",this.placeholder="",this._type="text",this.inputMode="text",this._mandatory=!1,this.disabled=!1,this.readonly=!1,this.textColor="",this.xAlignment=s.DEFAULT_HORIZONTAL_ALIGNMENT,this.rowSpan=1,this.minValue=NaN,this.maxValue=NaN,this._visible=!0,this.form=null,this.isActive=!1,this.showTitle=!0,this.renderTitle=!0,this.renderError=!0,this.renderSymbol=!0,this.layoutType="form",this.parentFieldKey=null,this.regex=null,this.regexError="",this.valueChange=new e.EventEmitter,this.keyup=new e.EventEmitter,this._calculateFormattedValue=!0,this.controlType="textbox",this.standAlone=!1,this.isInEditMode=!1,this._isInFocus=!1,this._displayValueSubject=new C.BehaviorSubject(""),this.isInFocus=!1}set key(t){this._key=t,this.dataQa=t}get key(){return this._key}set value(t){t||(t=""),this.isDifferentValue(t)&&(this._value=t),this.setFormattedValue(this.value),this.changeDisplayValue()}get value(){return this._value}get valueAsCurrentCulture(){return this.utilitiesService.changeDecimalSeparatorWhenItsComma(this.value,!0)}set minFractionDigits(t){this._minFractionDigits=t,this.setFormattedValue(this.value),this.changeDisplayValue()}get minFractionDigits(){return this._minFractionDigits}set maxFractionDigits(t){this._maxFractionDigits=t,this.setFormattedValue(this.value),this.changeDisplayValue()}get maxFractionDigits(){return this._maxFractionDigits}set type(t){this._type=t,this.value&&(this.setFormattedValue(this.value),this.changeDisplayValue(),this.setInputModeAttribute())}get type(){return this._type}set mandatory(t){this._mandatory=t}get mandatory(){return this._mandatory}set visible(t){this._visible=t,t?this.renderer.removeClass(this.element.nativeElement,"hidden-element"):this.renderer.addClass(this.element.nativeElement,"hidden-element")}get visible(){return this._visible}get calculateFormattedValue(){return this._calculateFormattedValue}set isInFocus(t){this._isInFocus=t,this.setFormattedValue(this.value),this.changeDisplayValue()}get isInFocus(){return this._isInFocus}get displayValue$(){return this._displayValueSubject.asObservable().pipe((0,C.distinctUntilChanged)())}setInputModeAttribute(){this.inputMode="currency"===this.type||"percentage"===this.type||"real"===this.type?"decimal":"int"===this.type?"numeric":"phone"===this.type?"tel":"email"===this.type?"email":"text",this.input&&this.renderer.setAttribute(this.input.nativeElement,"inputmode",this.inputMode)}notifyDisplayValueChange(t){this._displayValueSubject.next(t)}setFormattedValue(t){this.isInFocus||(this.formattedValue=this._calculateFormattedValue?"currency"===this.type?this.utilitiesService.formatCurrency(t,this.accessory,this.minFractionDigits,this.maxFractionDigits):"percentage"===this.type?this.utilitiesService.formatPercent(t,this.minFractionDigits,this.maxFractionDigits):"real"===this.type?this.utilitiesService.formatDecimal(t,this.minFractionDigits,this.maxFractionDigits):"int"===this.type?this.utilitiesService.formatNumber(t):"duration"===this.type?this.utilitiesService.formatDuration(t,{duration:"seconds"}):t:t,this.updateFormFieldValue())}updateFormFieldValue(t=!1){this.customizationService.updateFormFieldValue(this.form,this.key,this.value||this.formattedValue,this.parentFieldKey)}changeDisplayValue(){let t="";t="link"==this.type?this.formattedValue:this.isDecimal()?this.isInFocus?this.valueAsCurrentCulture:this.formattedValue:(this.isNumberType(),this.isInFocus?this.value:this.formattedValue),this.notifyDisplayValueChange(t)}setDefaultForm(){const t=new s.PepTextboxField({key:this.key,value:this.valueAsCurrentCulture,mandatory:this.mandatory,readonly:this.readonly,disabled:this.disabled,maxFieldCharacters:this.maxFieldCharacters,type:this.type,minValue:this.minValue,maxValue:this.maxValue,regex:this.regex});this.form=this.customizationService.getDefaultFromGroup(t,this.renderError)}ngOnInit(){null===this.form&&(this.standAlone=!0,this.minValue=isNaN(this.minValue)&&!isNaN(this.maxValue)?0:this.minValue,this.maxValue=isNaN(this.maxValue)&&!isNaN(this.minValue)?99999:this.maxValue,this.setDefaultForm(),this.renderer.addClass(this.element.nativeElement,s.PepCustomizationService.STAND_ALONE_FIELD_CLASS_NAME),this.renderTitle||this.renderer.addClass(this.element.nativeElement,s.PepCustomizationService.STAND_ALONE_FIELD_NO_SPACING_CLASS_NAME)),this.readonly="duration"===this.type||this.readonly,"text"===this.type&&this.regex&&(!this.regexError||0===this.regexError.length)&&this.translate.get("MESSAGES.ERROR_INVALID_PATTERN").subscribe(t=>this.regexError=t),this.updateFormFieldValue()}ngAfterViewInit(){this.setInputModeAttribute()}ngOnChanges(t){this.standAlone&&this.setDefaultForm(),this.readonly="duration"===this.type||this.readonly}ngOnDestroy(){}onFocus(t){this.isInFocus=!0,setTimeout(()=>{if(this.isInFocus){const a=t.target||t.srcElement;a&&a.select()}},0)}isDecimal(){let t=!1;return this.isNumberType()&&("currency"===this.type||"real"===this.type)&&(t=!0),t}isNumberType(){return"percentage"===this.type||"int"===this.type||"currency"===this.type||"real"===this.type}isValueValid(t){let a=!1;if(this.isNumberType())if(""===t)a=!this.mandatory;else{t=this.utilitiesService.changeDecimalSeparatorWhenItsComma(t);const i=(0,I.coerceNumberProperty)(t);a=isNaN(this.minValue)||isNaN(this.maxValue)?isNaN(this.minValue)?!!isNaN(this.maxValue)||i<=this.maxValue:i>=this.minValue:i>=this.minValue&&i<=this.maxValue}else a=!0;return a}isDifferentValue(t){let a=!1;return a=!this.isNumberType()||""===this.value||""===t||!1===this.utilitiesService.isEqualNumber(this.valueAsCurrentCulture,t),a}onChange(t){this.valueChange.emit(t.target?t.target.value:t)}onKeyup(t){this.keyup.emit(t)}onBlur(t){const a=t.target?t.target.value:t;if(this.renderError||this.isValueValid(a)){const i=this.isDecimal()?this.utilitiesService.changeDecimalSeparatorWhenItsComma(a):a;i!==this.valueAsCurrentCulture&&this.isDifferentValue(a)&&(this.value=i,this.valueChange.emit(this.value))}else this.renderer.setProperty(this.input.nativeElement,"value",this.valueAsCurrentCulture);this.isInEditMode&&(this.isInEditMode=!1),this.isInFocus=!1}anchorClicked(){const t=this.value;if(t.trim().length>0)switch(this.type){case"email":window.open("mailto:"+t,"email");break;case"phone":window.open("tel:"+t,"tel");break;case"link":window.open(t)}}cardTemplateClicked(t){this.isInEditMode=!0,setTimeout(()=>{this.input.nativeElement.focus()},0)}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275directiveInject(s.PepCustomizationService),e.\u0275\u0275directiveInject(e.Renderer2),e.\u0275\u0275directiveInject(e.ElementRef),e.\u0275\u0275directiveInject(b.TranslateService),e.\u0275\u0275directiveInject(s.PepUtilitiesService))},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["pep-textbox"]],viewQuery:function(t,a){if(1&t&&e.\u0275\u0275viewQuery(P,5),2&t){let i;e.\u0275\u0275queryRefresh(i=e.\u0275\u0275loadQuery())&&(a.input=i.first)}},hostVars:1,hostBindings:function(t,a){2&t&&e.\u0275\u0275attribute("data-qa",a.dataQa)},inputs:{key:"key",value:"value",minFractionDigits:"minFractionDigits",maxFractionDigits:"maxFractionDigits",accessory:"accessory",label:"label",placeholder:"placeholder",type:"type",mandatory:"mandatory",disabled:"disabled",readonly:"readonly",maxFieldCharacters:"maxFieldCharacters",hint:"hint",textColor:"textColor",xAlignment:"xAlignment",rowSpan:"rowSpan",minValue:"minValue",maxValue:"maxValue",visible:"visible",form:"form",isActive:"isActive",showTitle:"showTitle",renderTitle:"renderTitle",renderError:"renderError",renderSymbol:"renderSymbol",layoutType:"layoutType",parentFieldKey:"parentFieldKey",regex:"regex",regexError:"regexError",isInFocus:"isInFocus"},outputs:{valueChange:"valueChange",keyup:"keyup"},features:[e.\u0275\u0275NgOnChangesFeature],decls:6,vars:4,consts:[[3,"formGroup"],["pepTemplate",""],[4,"ngIf"],[3,"label","mandatory","disabled","maxFieldCharacters","hint","xAlignment","showTitle","inputLength",4,"ngIf"],["appearance","outline"],["matInput","","pepTextboxValidation","","autocomplete","off",1,"body-sm",3,"formControlName","id","name","maxlength","placeholder","ngStyle","title","type","value","ngClass","keyup.enter","focus","blur","change","keyup"],["input",""],["class","dis-grid",4,"ngIf"],["matPrefix","",3,"value","label","type","disabled",4,"ngIf"],["matSuffix","",3,"value","label","type","disabled",4,"ngIf"],[3,"label","mandatory","disabled","maxFieldCharacters","hint","xAlignment","showTitle","inputLength"],[1,"dis-grid"],["href","javascript:void(0)",1,"color-link","body-sm",3,"id","name","click"],[4,"ngIf","ngIfThen","ngIfElse"],["requiredError",""],["otherErrorContainer",""],[1,"body-xs",3,"title","innerText"],["patternError",""],["otherError",""],[1,"body-xs"],["matPrefix","",3,"value","label","type","disabled"],["matSuffix","",3,"value","label","type","disabled"],["regularBlock",""],["groupedBlock",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"formGroupName"],["pepTextboxValidation","","matInput","","autocomplete","off",1,"body-sm",3,"id","name","placeholder","title","formControlName","value","blur","change","keyup","keyup.enter","focus"],["editBlock",""],["readOnlyBlock",""],[3,"ngClass"],[1,"pep-card-input","card-flex-container",3,"ngStyle","ngClass","click"],["class","body-xs title",3,"title",4,"ngIf"],[1,"body-sm","value",3,"id","title","ngClass","ngStyle"],["class","pep-button weak card-edit-button","mat-button","",4,"ngIf"],[1,"body-xs","title",3,"title"],["mat-button","",1,"pep-button","weak","card-edit-button"],["name","system_edit"],["selectedBlock",""],["notSelectedBlock",""],["notEmptyBlock",""],["emptyBlock",""],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["class","color-link body-sm pep-report-input","target","_blank",3,"id","ngClass","title","href",4,"ngIf"],["target","_blank",1,"color-link","body-sm","pep-report-input",3,"id","ngClass","title","href"],[1,"body-sm","pep-report-input",3,"id","ngClass","title","ngStyle"],[3,"id"]],template:function(t,a){1&t&&(e.\u0275\u0275elementContainerStart(0,0),e.\u0275\u0275template(1,j,9,22,"ng-template",null,1,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(3,Z,6,3,"ng-container",2),e.\u0275\u0275template(4,re,6,3,"ng-container",2),e.\u0275\u0275template(5,fe,6,3,"ng-container",2),e.\u0275\u0275elementContainerEnd()),2&t&&(e.\u0275\u0275property("formGroup",a.form),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf","form"===a.layoutType),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","card"===a.layoutType),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","table"===a.layoutType))},dependencies:[p.NgClass,p.NgIf,p.NgTemplateOutlet,p.NgStyle,p.NgSwitch,p.NgSwitchCase,p.NgSwitchDefault,c.DefaultValueAccessor,c.NgControlStatus,c.NgControlStatusGroup,c.MaxLengthValidator,c.FormGroupDirective,c.FormControlName,c.FormGroupName,x.MatButton,_.MatError,_.MatFormField,_.MatPrefix,_.MatSuffix,h.MatInput,g.MatIcon,u.PepIconComponent,y.PepFieldTitleComponent,f.PepTextboxIconComponent,ye,p.AsyncPipe,s.PepToNumberPipe,b.TranslatePipe],styles:["[_nghost-%COMP%]{height:inherit;display:grid}[_nghost-%COMP%] > *[_ngcontent-%COMP%]{align-self:center;align-items:baseline}.disable-hidden[_ngcontent-%COMP%]{display:none}.dis-grid[_ngcontent-%COMP%]{display:grid}.multi-rows-text[_ngcontent-%COMP%]{display:-webkit-box;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;white-space:normal!important}"],changeDetection:0}),n})(),be=(()=>{class n{constructor(t){this.pepIconRegistry=t,this.pepIconRegistry.registerIcons([u.pepIconSystemEdit])}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275inject(u.PepIconRegistry))},n.\u0275mod=e.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=e.\u0275\u0275defineInjector({imports:[p.CommonModule,c.ReactiveFormsModule,V.MatCommonModule,x.MatButtonModule,_.MatFormFieldModule,h.MatInputModule,g.MatIconModule,s.PepNgxLibModule,u.PepIconModule,y.PepFieldTitleModule,f.PepTextboxIconModule]}),n})()}}]);